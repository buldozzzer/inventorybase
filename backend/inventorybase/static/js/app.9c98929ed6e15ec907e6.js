webpackJsonp([1],{"+G8A":function(t,e){},"+zga":function(t,e){},"04cq":function(t,e){},"1NWa":function(t,e){},"1s03":function(t,e){},"2GWe":function(t,e){},"3VqN":function(t,e){},"3uPM":function(t,e){},"4cdW":function(t,e){},"5TR4":function(t,e){},"7//w":function(t,e){},"9M+g":function(t,e){},"9sJ/":function(t,e){},A2X2:function(t,e){},C4IN:function(t,e){},DpNm:function(t,e){},F5Mc:function(t,e){},FKgI:function(t,e){},HHiU:function(t,e){},Jmt5:function(t,e){},KaS7:function(t,e){},"L/uN":function(t,e){},M8ks:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("Jmt5"),n("9M+g");var o=n("7+uW"),r=n("Xxa5"),s=n.n(r),i=n("exGp"),a=n.n(i),c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[n("b-navbar-brand",{attrs:{href:"#/items/"}},[n("b",[t._v("База материальных ценностей")])]),t._v(" "),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),t._v(" "),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-item-dropdown",{attrs:{text:"Таблицы"}},[n("b-dropdown-item",{attrs:{href:"#/items"}},[t._v("Мат. ценности")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#/employees"}},[t._v("Сотрудники")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#/categories"}},[t._v("Категории")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#/otss"}},[t._v("Катеогрии ОТСС")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#/locations"}},[t._v("Местоположения")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#/units"}},[t._v("Подразделения")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#/conditions"}},[t._v("Состояния")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#/types"}},[t._v("Типы")])],1)],1),t._v(" "),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("em",[t._v("User")])]},proxy:!0}])},[t._v(" "),n("b-dropdown-item",{attrs:{href:"#"}},[t._v("Profile")]),t._v(" "),n("b-dropdown-item",{attrs:{href:"#"}},[t._v("Sign Out")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var l={name:"App",components:{Nav:n("VU/8")({name:"Nav"},c,!1,function(t){n("SK7f")},"data-v-568a5c6f",null).exports},data:function(){return{dataForChildren:null}},mounted:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.$on("clearDataForChildren",function(){t.dataForChildren=null});case 2:case"end":return e.stop()}},e,t)}))()}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Nav"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var m=n("VU/8")(l,u,!1,function(t){n("oRsq")},null,null).exports,d=n("/ocq"),f=n("mvHQ"),p=n.n(f),v={name:"EmployeeAddModal",data:function(){return{form:{surname:"",name:"",secname:""}}},methods:{createEmployee:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/employee/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:p()(t.form)});case 2:if(201===(n=e.sent).status){e.next=11;break}return e.t0=alert,e.t1=p.a,e.next=8,n.json();case 8:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 11:ue.$emit("newData");case 12:case"end":return e.stop()}},e,t)}))()},onReset:function(t){t.preventDefault(),this.initForm(),this.$refs.employeeAddModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.employeeAddModal.hide(),this.createEmployee(),this.initForm()},check:function(t,e){return t!==e},initForm:function(){for(var t in this.form)this.form[t]=""}}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"employeeAddModal",attrs:{id:"employee-add-modal",title:"Добавить сотрудника в базу","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Добавить\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-surname-group",label:"ФИО:","label-for":"form-surname-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-surname-input",type:"text",autofocus:"",value:t.form.surname,required:"",placeholder:"Введите фамилию",state:t.check(t.form.surname,"")},model:{value:t.form.surname,callback:function(e){t.$set(t.form,"surname",e)},expression:"form.surname"}}),t._v(" "),n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-name-input",type:"text",value:t.form.name,required:"",placeholder:"Введите имя",state:t.check(t.form.name,"")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-secname-input",type:"text",value:t.form.secname,required:"",placeholder:"Введите отчество",state:t.check(t.form.secname,"")},model:{value:t.form.secname,callback:function(e){t.$set(t.form,"secname",e)},expression:"form.secname"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var h=n("VU/8")(v,b,!1,function(t){n("ltgE")},null,null).exports,_={name:"ConfirmForm",props:["op","message","payload","dynamicId"],data:function(){return{title:"Подтвердите операцию"}},methods:{reset:function(t){t.preventDefault(),this.$refs.confirmModal.hide(),ue.$emit("cancel")},operation:function(t){this.op(this.payload),t.preventDefault(),this.$refs.confirmModal.hide(),ue.$emit("cancel")}}},y={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"confirmModal",attrs:{id:t.dynamicId,title:t.title,"hide-footer":"",centered:"","hide-header-close":""}},[n("p",[t._v(t._s(t.message))]),t._v(" "),n("b-button",{attrs:{variant:"success"},on:{click:t.operation}},[t._v("\n      Да\n    ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:t.reset}},[t._v("\n      Отмена\n    ")])],1)],1)},staticRenderFns:[]};var w=n("VU/8")(_,y,!1,function(t){n("5TR4")},null,null).exports,x={name:"EmployeeEditModal",data:function(){return{employeeForm:{}}},methods:{editEmployee:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t._id,e.next=3,fetch("http://localhost:8000/api/v1/employee/"+o+"/",{method:"PUT",body:p()(t),headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:if(i=e.sent,console.log("Успех:",p()(i)),202===r.status){e.next=16;break}return e.t0=alert,e.t1=p.a,e.next=13,r.json();case 13:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 16:ue.$emit("newData");case 17:case"end":return e.stop()}},n,e)}))()},onReset:function(t){t.preventDefault(),this.$refs.employeeEditModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.employeeEditModal.hide();var e=this.employeeForm;this.editEmployee(e)},check:function(t,e){return t!==e}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"employeeEditModal",attrs:{id:"employee-edit-modal",title:"Редактровать запись о сотруднике","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n          Редактировать\n        ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n          Отмена\n        ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-surname-group",label:"ФИО:","label-for":"form-surname-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-surname-input",type:"text",value:t.employeeForm.surname,required:"",placeholder:"Введите фамилию",state:t.check(t.employeeForm.surname,"")},model:{value:t.employeeForm.surname,callback:function(e){t.$set(t.employeeForm,"surname",e)},expression:"employeeForm.surname"}}),t._v(" "),n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-name-input",type:"text",value:t.employeeForm.name,required:"",placeholder:"Введите имя",state:t.check(t.employeeForm.name,"")},model:{value:t.employeeForm.name,callback:function(e){t.$set(t.employeeForm,"name",e)},expression:"employeeForm.name"}}),t._v(" "),n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-secname-input",type:"text",value:t.employeeForm.secname,required:"",placeholder:"Введите отчество",state:t.check(t.employeeForm.secname,"")},model:{value:t.employeeForm.secname,callback:function(e){t.$set(t.employeeForm,"secname",e)},expression:"employeeForm.secname"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{ref:"selectableTable",staticClass:"mt-3",attrs:{striped:"",hover:"",fixed:"","sort-by":"surname",items:t.employeeList,fields:t.employeeFields,small:""},scopedSlots:t._u([{key:"head(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[t._v("Изменить/Удалить")])]}},{key:"cell(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.employee-edit-modal",modifiers:{"employee-edit-modal":!0}}],attrs:{icon:"pencil-square",variant:"warning","data-toggle":"tooltip","data-placement":"top",title:"Редактировать","font-scale":"2"},on:{click:function(n){return t.edit(e.item)}}}),t._v(" "),n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.employee-confirm",modifiers:{"employee-confirm":!0}}],attrs:{icon:"trash",variant:"danger","font-scale":"2","data-toggle":"tooltip","data-placement":"top",title:"Удалить"},on:{click:function(n){return t.remove(e.item)}}})],1)]}}])})],1)},staticRenderFns:[]};var C={name:"EmployeePage",components:{EmployeeAddModal:h,ConfirmForm:w,EmployeeEditModal:n("VU/8")(x,g,!1,function(t){n("mKE+")},"data-v-60c92dec",null).exports,EmployeeTable:n("VU/8")({name:"EmployeeTable",props:["employeeList","editEmployee","selectToRemoveRecord"],data:function(){return{employeeFields:[{key:"edit_remove",isRowHeader:!0,class:"text-center"},{key:"surname",label:"Фамилия",sortable:!0,class:"text-center"},{key:"name",label:"Имя",sortable:!0,class:"text-center"},{key:"secname",label:"Отчество",sortable:!0,class:"text-center"}]}},methods:{edit:function(t){this.editEmployee(t)},remove:function(t){this.selectToRemoveRecord(t)}}},k,!1,function(t){n("ukEN")},"data-v-75cbe7ae",null).exports},data:function(){return{employeeMessage:"Удалить сотрудника из базы?",employeeConfirm:"employee-confirm",employeeList:[],selected:[]}},methods:{selectToRemoveEmployee:function(t){var e=this;return a()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.selected.push(t);case 1:case"end":return n.stop()}},n,e)}))()},fetchEmployees:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/employee/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.employeeList=e.sent,t.employeeList=t.employeeList.employees,t.selected=[];case 8:case"end":return e.stop()}},e,t)}))()},editEmployee:function(t){this.$refs.employeeEdit.employeeForm=t},removeEmployee:function(t){var e=this;return a()(s.a.mark(function n(){var o,r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t._id,n.next=3,fetch("http://localhost:8000/api/v1/employee/"+o+"/",{method:"DELETE",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:if(204===(r=n.sent).status){n.next=12;break}return n.t0=alert,n.t1=p.a,n.next=9,r.json();case 9:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3);case 12:return n.next=14,e.fetchEmployees();case 14:case"end":return n.stop()}},n,e)}))()}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchEmployees();case 2:return e.next=4,ue.$on("newData",function(){t.fetchEmployees()});case 4:case"end":return e.stop()}},e,t)}))()}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-col",{staticClass:"mt-3"},[n("h3",[t._v("Сотрудники")])]),t._v(" "),n("b-col",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.employee-add-modal",modifiers:{"employee-add-modal":!0}}],staticClass:"mt-3",attrs:{variant:"success"}},[t._v("\n        Добавить сотрудника\n      ")])],1),t._v(" "),n("employee-table",{attrs:{"employee-list":t.employeeList,"edit-employee":t.editEmployee,"select-to-remove-record":t.selectToRemoveEmployee}})],1),t._v(" "),n("employee-add-modal"),t._v(" "),n("confirm-form",{attrs:{payload:t.selected[0],"dynamic-id":t.employeeConfirm,message:t.employeeMessage,op:t.removeEmployee}}),t._v(" "),n("employee-edit-modal",{ref:"employeeEdit"})],1)},staticRenderFns:[]};var $=n("VU/8")(C,F,!1,function(t){n("DpNm")},"data-v-aa2532b8",null).exports,R=n("BO1k"),q=n.n(R),E=n("G4W2"),S=n.n(E),T=(n("Z7gM"),{name:"Filters",props:["employeeInitials"],data:function(){return{otssCategories:[],conditions:[],operation:["Используется","Не используется",{text:"-",value:null}],units:[],filters:{responsible:null,otss_category:null,condition:null,in_operation:null},employees:[],fuseString:null}},methods:{createEmployeeList:function(){var t=this;return a()(s.a.mark(function e(){var n,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/employee/");case 2:return n=e.sent,e.next=5,n.json();case 5:o=(o=e.sent).employees,t.employeeToString(o),t.employees.push({value:null,text:"-"});case 9:case"end":return e.stop()}},e,t)}))()},employeeToString:function(t){for(var e=0;e<t.length;e++)this.employees.push(t[e].surname+" "+t[e].name[0]+"."+t[e].secname[0]+".")},fetchOTSS:function(){var t=this;return a()(s.a.mark(function e(){var n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,fetch("http://localhost:8000/api/v1/otss/");case 3:return o=e.sent,e.next=6,o.json();case 6:for(r in n=(n=e.sent).otss)t.otssCategories.push(n[r].category);t.otssCategories.push({text:"-",value:null});case 10:case"end":return e.stop()}},e,t)}))()},fetchConditions:function(){var t=this;return a()(s.a.mark(function e(){var n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("http://localhost:8000/api/v1/condition/");case 3:return o=e.sent,e.next=6,o.json();case 6:for(n=(n=e.sent).conditions,r=0;r<n.length;++r)t.conditions.push(n[r].condition);t.conditions.push({text:"-",value:null});case 10:case"end":return e.stop()}},e,t)}))()},resetFilters:function(){this.filters={responsible:null,otss_category:null,condition:null,in_operation:null},this.$parent.$data.fuseString=null,ue.$emit("resetFilters",this.filters)},fetchUnits:function(){var t=this;return a()(s.a.mark(function e(){var n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("http://localhost:8000/api/v1/unit/");case 3:return o=e.sent,e.next=6,o.json();case 6:for(n=(n=e.sent).units,r=0;r<n.length;++r)t.units.push(n[r].unit);case 9:case"end":return e.stop()}},e,t)}))()}},watch:{fuseString:function(){this.$parent.$data.fuseString=this.fuseString,ue.$emit("changeFuseString",this.fuseString)}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.createEmployeeList();case 2:return e.next=4,t.fetchOTSS();case 4:return e.next=6,t.fetchConditions();case 6:case"end":return e.stop()}},e,t)}))()}}),j={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"p-3 mb-2 bg-gradient-primary"},[n("b-container",[n("b-row",[n("b-col",[n("b-form-group",{attrs:{label:"Ответственный:"}},[n("b-form-select",{attrs:{options:t.employees},model:{value:t.filters.responsible,callback:function(e){t.$set(t.filters,"responsible",e)},expression:"filters.responsible"}})],1)],1),t._v(" "),n("b-col",[n("b-form-group",{attrs:{label:"Категория ОТСС:"}},[n("b-form-select",{attrs:{options:t.otssCategories},model:{value:t.filters.otss_category,callback:function(e){t.$set(t.filters,"otss_category",e)},expression:"filters.otss_category"}})],1)],1),t._v(" "),n("b-col",[n("b-form-group",{attrs:{label:"Состояние:"}},[n("b-form-select",{attrs:{options:t.conditions},model:{value:t.filters.condition,callback:function(e){t.$set(t.filters,"condition",e)},expression:"filters.condition"}})],1)],1),t._v(" "),n("b-col",[n("b-form-group",{attrs:{label:"Использование:"}},[n("b-form-select",{attrs:{options:t.operation},model:{value:t.filters.in_operation,callback:function(e){t.$set(t.filters,"in_operation",e)},expression:"filters.in_operation"}})],1)],1),t._v(" "),n("b-col",[n("b-form-group",{attrs:{label:"По контексту:"}},[n("b-form-input",{model:{value:t.fuseString,callback:function(e){t.fuseString=e},expression:"fuseString"}})],1)],1),t._v(" "),n("b-col",{attrs:{align:"center"}},[n("b-icon",{staticClass:"mt-4",attrs:{icon:"arrow-counterclockwise",type:"button","data-toggle":"tooltip","data-placement":"top",title:"Сбросить фильтры","font-scale":"2","aria-hidden":"false"},on:{click:t.resetFilters}})],1)],1)],1)],1)},staticRenderFns:[]};var M=n("VU/8")(T,j,!1,function(t){n("+zga")},"data-v-078ec4a3",null).exports,I={name:"ComponentForm",props:["component"],data:function(){return{locations:[],categories:[],types:[]}},computed:{points:function(){for(var t=[],e=[],n=[],o=[],r=0;r<this.locations.length;++r)t.push(this.locations[r].object),e.push(this.locations[r].cabinet),n.push(this.locations[r].corpus),o.push(this.locations[r].unit);return[t,e,n,o]}},methods:{check:function(t,e){return t!==e},fetchLocations:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/location/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.locations=e.sent,t.locations=t.locations.locations;case 7:case"end":return e.stop()}},e,t)}))()},fetchCategories:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/category/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.categories=e.sent,t.categories=t.categories.categories;case 7:case"end":return e.stop()}},e,t)}))()},fetchTypes:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/type/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.types=e.sent,t.types=t.types.types;case 7:case"end":return e.stop()}},e,t)}))()}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchLocations();case 2:return e.next=4,t.fetchCategories();case 4:return e.next=6,t.fetchTypes();case 6:case"end":return e.stop()}},e,t)}))()}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{attrs:{id:"component-"+t.component.id}},[t._v("\n            "+t._s(""!==t.component.name?t.component.name:"Компонент "+(t.component.id+1))+"\n          ")]),t._v(" "),n("b-container",{attrs:{id:"comp"}},[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"form-comp_name-group",label:"Название составляющей:","label-for":"form-comp_name-input"}},[n("b-form-input",{attrs:{id:"form-comp_name-input",type:"text",required:"",state:t.check(t.component.name,""),placeholder:"Введите название составляющей"},model:{value:t.component.name,callback:function(e){t.$set(t.component,"name",e)},expression:"component.name"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"form-comp_serial_n-group",label:"Заводской номер составляющей:","label-for":"form-comp_serial_n-input"}},[n("b-form-input",{attrs:{id:"form-comp_serial_n-input",type:"text",placeholder:"Введите заводской номер"},model:{value:t.component.serial_n,callback:function(e){t.$set(t.component,"serial_n",e)},expression:"component.serial_n"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_type-group",label:"Тип составляющей:","label-for":"form-comp_type-input"}},[n("b-form-input",{attrs:{id:"form-comp_type-input",type:"text",list:"type-list"},model:{value:t.component.type,callback:function(e){t.$set(t.component,"type",e)},expression:"component.type"}}),t._v(" "),n("datalist",{attrs:{id:"type-list"}},[n("option",[t._v("---------")]),t._v(" "),t._l(t.types,function(e){return n("option",{key:e._id},[t._v("\n                      "+t._s(e.type)+"\n                    ")])})],2)],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_view-group",label:"Вид составляющей:","label-for":"form-comp_view-input"}},[n("b-form-input",{attrs:{id:"form-comp_view-input",type:"text"},model:{value:t.component.view,callback:function(e){t.$set(t.component,"view",e)},expression:"component.view"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_category-group",label:"Категория:","label-for":"form-comp_category-input"}},[n("b-form-input",{attrs:{id:"form-comp_category-input",type:"text",list:"category-list"},model:{value:t.component.category,callback:function(e){t.$set(t.component,"category",e)},expression:"component.category"}}),t._v(" "),n("datalist",{attrs:{id:"category-list"}},[n("option",[t._v("---------")]),t._v(" "),t._l(t.categories,function(e){return n("option",{key:e._id},[t._v("\n                      "+t._s(e.category)+"\n                    ")])})],2)],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_year-group",label:"Год выпуска:","label-for":"form-comp_year-input"}},[n("b-form-input",{attrs:{id:"form-comp_year-input",type:"text",placeholder:"YYYY"},model:{value:t.component.year,callback:function(e){t.$set(t.component,"year",e)},expression:"component.year"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_cost-group",label:"Цена:","label-for":"form-comp_cost-input"}},[n("b-form-input",{attrs:{id:"form-comp_cost-input",type:"number"},model:{value:t.component.cost,callback:function(e){t.$set(t.component,"cost",e)},expression:"component.cost"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_object-group",label:"Объект:","label-for":"form-comp_object-input"}},[n("b-form-input",{attrs:{id:"form-comp_object-input",type:"text",list:"object-list"},model:{value:t.component.location.object,callback:function(e){t.$set(t.component.location,"object",e)},expression:"component.location.object"}}),t._v(" "),n("datalist",{attrs:{id:"object-list"}},[n("option",[t._v("---------")]),t._v(" "),t._l(t.points[0],function(e){return n("option",{key:e},[t._v(t._s(e))])})],2)],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_corpus-group",label:"Корпус:","label-for":"form-comp_corpus-input"}},[n("b-form-input",{attrs:{id:"form-comp_corpus-input",type:"text",list:"corpus-list"},model:{value:t.component.location.corpus,callback:function(e){t.$set(t.component.location,"corpus",e)},expression:"component.location.corpus"}}),t._v(" "),n("datalist",{attrs:{id:"corpus-list"}},[n("option",[t._v("---------")]),t._v(" "),t._l(t.points[2],function(e){return n("option",{key:e},[t._v(t._s(e))])})],2)],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_unit-group",label:"Подразделение:","label-for":"form-comp_unit-input"}},[n("b-form-input",{attrs:{id:"form-comp_unit-input",type:"text",list:"unit-list"},model:{value:t.component.location.unit,callback:function(e){t.$set(t.component.location,"unit",e)},expression:"component.location.unit"}}),t._v(" "),n("datalist",{attrs:{id:"unit-list"}},[n("option",[t._v("---------")]),t._v(" "),t._l(t.points[3],function(e){return n("option",{key:e},[t._v(t._s(e))])})],2)],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_cabinet-group",label:"Кабинет:","label-for":"form-comp_cabinet-input"}},[n("b-form-input",{attrs:{id:"form-comp_cabinet-input",type:"text",list:"cabinet-list"},model:{value:t.component.location.cabinet,callback:function(e){t.$set(t.component.location,"cabinet",e)},expression:"component.location.cabinet"}}),t._v(" "),n("datalist",{attrs:{id:"cabinet-list"}},[n("option",[t._v("---------")]),t._v(" "),t._l(t.points[1],function(e){return n("option",{key:e},[t._v(t._s(e))])})],2)],1)],1)],1)],1)],1)},staticRenderFns:[]};var D={name:"ComponentList",props:["payload"],components:{ComponentForm:n("VU/8")(I,L,!1,function(t){n("4cdW")},"data-v-d76c071e",null).exports},data:function(){return{index:0,components:[],showArray:[]}},methods:{scrollIntoView:function(t){t.preventDefault();var e=t.target.getAttribute("href"),n=e?document.querySelector(e):null;n&&(this.$refs.content.scrollTop=n.offsetTop)},initComponentForm:function(){this.components=[]},init:function(){if(null==this.payload){var t={id:this.index,name:"",serial_n:"",type:"",view:"",category:"",year:"",cost:"",location:{object:"",corpus:"",unit:"",cabinet:""}};this.components.push(t),this.index+=1}else this.components=this.payload,this.index=this.components.length},addComponent:function(){var t={id:this.index,name:"",serial_n:"",type:"",view:"",category:"",year:"",cost:"",location:{object:"",corpus:"",unit:"",cabinet:""}};this.components.push(t),this.index+=1},deleteComponent:function(){this.components.splice(this.components.length-1,1),this.index-=1},createComponentList:function(){return this.components}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.init(),e.next=3,ue.$on("clearComponentForm",function(){return t.initComponentForm()});case 3:case"end":return e.stop()}},e,t)}))()}},A={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{"no-body":""}},[n("b-card",{attrs:{"no-body":""}},[n("b-nav",{directives:[{name:"b-scrollspy",rawName:"v-b-scrollspy:nav-scroller",arg:"nav-scroller"}],attrs:{slot:"header",pills:"","card-header":""},slot:"header"},t._l(t.components,function(e){return n("b-nav-item",{key:e.id,attrs:{href:"#component-"+e.id},on:{click:t.scrollIntoView}},[t._v("\n        "+t._s(""!==e.name?e.name:"Компонент "+(e.id+1))+"\n      ")])}),1),t._v(" "),n("b-card-body",{ref:"content",staticStyle:{position:"relative",height:"650px","overflow-y":"scroll"},attrs:{id:"nav-scroller"}},[t._l(t.components,function(t){return n("component-form",{key:t.id,attrs:{component:t}})}),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-button",{on:{click:t.addComponent}},[t._v("Добавить компонент")])],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[t.components.length>0?n("b-button",{attrs:{variant:"danger"},on:{click:t.deleteComponent}},[t._v("Удалить компонент")]):t._e()],1)],1)],2)],1)],1)},staticRenderFns:[]};var N=n("VU/8")(D,A,!1,function(t){n("rWM8")},null,null).exports,U={name:"FormTemplate",props:["itemForm","employeeInitials"],data:function(){return{otssCategories:[],conditions:[],operation:["Используется","Не используется"],units:[]}},methods:{isIntroduced:function(t,e){return t!==e},fetchOTSS:function(){var t=this;return a()(s.a.mark(function e(){var n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("http://localhost:8000/api/v1/otss/");case 3:return o=e.sent,e.next=6,o.json();case 6:for(n=(n=e.sent).otss,r=0;r<n.length;++r)t.otssCategories.push(n[r].category);case 9:case"end":return e.stop()}},e,t)}))()},fetchConditions:function(){var t=this;return a()(s.a.mark(function e(){var n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("http://localhost:8000/api/v1/condition/");case 3:return o=e.sent,e.next=6,o.json();case 6:for(n=(n=e.sent).conditions,r=0;r<n.length;++r)t.conditions.push(n[r].condition);case 9:case"end":return e.stop()}},e,t)}))()},fetchUnits:function(){var t=this;return a()(s.a.mark(function e(){var n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,fetch("http://localhost:8000/api/v1/unit/");case 3:return o=e.sent,e.next=6,o.json();case 6:for(n=(n=e.sent).units,r=0;r<n.length;++r)t.units.push(n[r].unit);case 9:case"end":return e.stop()}},e,t)}))()}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchUnits();case 2:return e.next=4,t.fetchOTSS();case 4:return e.next=6,t.fetchConditions();case 6:case"end":return e.stop()}},e,t)}))()}},O={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{attrs:{id:"item-container"}},[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"form-name-group",label:"Наименование:","label-for":"form-name-input"}},[n("b-form-input",{attrs:{id:"form-name-input",autofocus:"",type:"text",value:t.itemForm.name,required:"",placeholder:"Введите наименование мат. ценности",state:t.isIntroduced(t.itemForm.name,"")},model:{value:t.itemForm.name,callback:function(e){t.$set(t.itemForm,"name",e)},expression:"itemForm.name"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-inventory_n-group",label:"Инвентарный номер:","label-for":"form-inventory_n-input"}},[n("b-form-input",{attrs:{id:"form-inventory_n-input",type:"text",placeholder:"Введите инвентарный номер"},model:{value:t.itemForm.inventory_n,callback:function(e){t.$set(t.itemForm,"inventory_n",e)},expression:"itemForm.inventory_n"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-responsible-group",label:"Ответственное лицо:","label-for":"form-responsible-input"}},[n("b-form-input",{attrs:{id:"form-responsible-input",list:"employee-list",placeholder:"Иванов И.И."},model:{value:t.itemForm.responsible,callback:function(e){t.$set(t.itemForm,"responsible",e)},expression:"itemForm.responsible"}}),t._v(" "),n("datalist",{attrs:{id:"employee-list"}},[n("option",[t._v("---------")]),t._v(" "),t._l(t.employeeInitials,function(e){return n("option",[t._v(t._s(e))])})],2)],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-condition-group",label:"Состояние:","label-for":"form-condition-input"}},[n("b-form-select",{attrs:{id:"form-condition-input",type:"radio",options:t.conditions},model:{value:t.itemForm.condition,callback:function(e){t.$set(t.itemForm,"condition",e)},expression:"itemForm.condition"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-otss_category-group",label:"Категория ОТСС:","label-for":"form-otss_category-input"}},[n("b-form-select",{attrs:{id:"form-otss_category-input",type:"radio",options:t.otssCategories},model:{value:t.itemForm.otss_category,callback:function(e){t.$set(t.itemForm,"otss_category",e)},expression:"itemForm.otss_category"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-unit_from-group",label:"Подразделение, откуда поступило:","label-for":"form-unit_from-input"}},[n("b-form-input",{attrs:{id:"form-unit_from-input",list:"unit-list"},model:{value:t.itemForm.unit_from,callback:function(e){t.$set(t.itemForm,"unit_from",e)},expression:"itemForm.unit_from"}}),t._v(" "),n("datalist",{attrs:{id:"unit-list"}},[n("option",[t._v("---------")]),t._v(" "),t._l(t.units,function(e){return n("option",[t._v(t._s(e))])})],2)],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-in_operation-group",label:"Находится в использовании:","label-for":"form-in_operation-input"}},[n("b-form-select",{attrs:{id:"form-in_operation-input",type:"radio",options:t.operation},model:{value:t.itemForm.in_operation,callback:function(e){t.$set(t.itemForm,"in_operation",e)},expression:"itemForm.in_operation"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-number_of_receipt-group",label:"Номер требования о поступлении на учёт:","label-for":"form-number_of_receipt-input"}},[n("b-form-input",{attrs:{id:"form-number_of_receipt-input",placeholder:"Введите номер требования"},model:{value:t.itemForm.number_of_receipt,callback:function(e){t.$set(t.itemForm,"number_of_receipt",e)},expression:"itemForm.number_of_receipt"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-date_of_receipt-group",label:"Дата поступления на учёт:","label-for":"form-date_of_receipt-input"}},[n("b-input-group",[n("b-form-datepicker",{attrs:{"aria-controls":"date_of_receipt-input","today-button":"","reset-button":"","close-button":"",placeholder:"Выберите дату","date-format-options":{day:"2-digit",month:"short",year:"numeric"}},model:{value:t.itemForm.date_of_receipt,callback:function(e){t.$set(t.itemForm,"date_of_receipt",e)},expression:"itemForm.date_of_receipt"}})],1)],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-requisites-group",label:"Реквизиты книги учёта:","label-for":"form-requisites-input"}},[n("b-input-group",[n("b-form-input",{attrs:{placeholder:"Введите реквизиты документов"},model:{value:t.itemForm.requisites,callback:function(e){t.$set(t.itemForm,"requisites",e)},expression:"itemForm.requisites"}})],1)],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-last_check-group",label:"Дата последней проверки:","label-for":"form-last_check-input"}},[n("b-input-group",[n("b-form-datepicker",{attrs:{"aria-controls":"last_check-input",placeholder:"Выберите дату","today-button":"","reset-button":"","close-button":"","date-format-options":{day:"2-digit",month:"short",year:"numeric"}},model:{value:t.itemForm.last_check,callback:function(e){t.$set(t.itemForm,"last_check",e)},expression:"itemForm.last_check"}})],1)],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-user-group",label:"Лицо,которому передано в пользование:","label-for":"form-user-input"}},[n("b-form-input",{attrs:{id:"form-user-input",list:"employee-list",placeholder:"Иванов И.И."},model:{value:t.itemForm.user,callback:function(e){t.$set(t.itemForm,"user",e)},expression:"itemForm.user"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-date_of_transfer-group",label:"Дата передачи во временное пользование:","label-for":"form-date_of_transfer-input"}},[n("b-input-group",[n("b-form-datepicker",{attrs:{"aria-controls":"date_of_transfer-input",placeholder:"Выберите дату","today-button":"","reset-button":"","close-button":"","date-format-options":{day:"2-digit",month:"short",year:"numeric"}},model:{value:t.itemForm.transfer_date,callback:function(e){t.$set(t.itemForm,"transfer_date",e)},expression:"itemForm.transfer_date"}})],1)],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-otss_requisites-group",label:"Реквизиты документов о категории:","label-for":"form-otss_requisites-input"}},[n("b-form-textarea",{attrs:{id:"form-otss_requisites-input",placeholder:"Введите реквизиты документов"},model:{value:t.itemForm.otss_requisites,callback:function(e){t.$set(t.itemForm,"otss_requisites",e)},expression:"itemForm.otss_requisites"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-spsi_requisites-group",label:"Реквизиты документов об СПСИ:","label-for":"form-spsi_requisites-input"}},[n("b-form-textarea",{attrs:{id:"form-spsi_requisites-input",placeholder:"Введите реквизиты документов"},model:{value:t.itemForm.spsi_requisites,callback:function(e){t.$set(t.itemForm,"spsi_requisites",e)},expression:"itemForm.spsi_requisites"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-fault_document_requisites-group",label:"Реквизиты документов о неисправности:","label-for":"form-fault_document_requisites-input"}},[n("b-form-textarea",{attrs:{id:"form-fault_document_requisites-input",placeholder:"Введите реквизиты документов"},model:{value:t.itemForm.fault_document_requisites,callback:function(e){t.$set(t.itemForm,"fault_document_requisites",e)},expression:"itemForm.fault_document_requisites"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-transfer_requisites-group",label:"Реквизиты документов о передаче:","label-for":"form-transfer_requisites-input"}},[n("b-form-textarea",{attrs:{id:"form-transfer_requisites-input",placeholder:"Введите реквизиты документов"},model:{value:t.itemForm.transfer_requisites,callback:function(e){t.$set(t.itemForm,"transfer_requisites",e)},expression:"itemForm.transfer_requisites"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"form-comment-group",label:"Примечание:","label-for":"form-comment-input"}},[n("b-form-textarea",{attrs:{id:"form-comment-input",placeholder:"Примечание"},model:{value:t.itemForm.comment,callback:function(e){t.$set(t.itemForm,"comment",e)},expression:"itemForm.comment"}})],1)],1)],1)],1)},staticRenderFns:[]};var V=n("VU/8")(U,O,!1,function(t){n("7//w")},"data-v-01af1ce0",null).exports,P={name:"AddModal",props:["employeeInitials"],components:{ComponentList:N,FormTemplate:V},data:function(){return{itemForm:{name:"",user:"",responsible:"",components:[],inventory_n:"",otss_category:"",condition:"",unit_from:"",in_operation:"",fault_document_requisites:"",date_of_receipt:null,number_of_receipt:"",requisites:"",transfer_date:null,otss_requisites:"",spsi_requisites:"",transfer_requisites:"",comment:"",last_check:null},showComponents:!1}},computed:{colsize:function(){return this.showComponents?6:10}},methods:{createItem:function(t){var e=this;return a()(s.a.mark(function n(){var o;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("http://localhost:8000/api/v1/item/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:p()(t)});case 2:if(201===(o=n.sent).status){n.next=12;break}return n.t0=alert,n.t1=p.a,n.next=8,o.json();case 8:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3),e.$parent.showErrorAlert();case 12:ue.$emit("updateList"),e.$parent.showAlert();case 14:case"end":return n.stop()}},n,e)}))()},onReset:function(t){t.preventDefault(),this.$refs.addItemModal.hide(),this.clearForm()},onSubmit:function(t){t.preventDefault(),this.$refs.addItemModal.hide(),this.showComponents&&(this.itemForm.components=this.$refs.componentList.createComponentList());var e={name:this.itemForm.name,user:this.itemForm.user,responsible:this.itemForm.responsible,components:this.itemForm.components,inventory_n:this.itemForm.inventory_n,otss_category:this.itemForm.otss_category,condition:this.itemForm.condition,unit_from:this.itemForm.unit_from,in_operation:this.itemForm.in_operation,fault_document_requisites:this.itemForm.fault_document_requisites,date_of_receipt:this.itemForm.date_of_receipt,number_of_receipt:this.itemForm.number_of_receipt,requisites:this.itemForm.requisites,transfer_date:this.itemForm.transfer_date,otss_requisites:this.itemForm.otss_requisites,spsi_requisites:this.itemForm.spsi_requisites,transfer_requisites:this.itemForm.transfer_requisites,comment:this.itemForm.comment,last_check:this.itemForm.last_check};this.createItem(e),this.clearForm()},isIntroduced:function(t,e){return t!==e},sendForm:function(){this.itemForm.components=this.$refs.componentList.createComponentList(),this.$parent.$parent.$data.dataForChildren=this.itemForm},clearForm:function(){this.itemForm={name:"",user:"",responsible:"",components:[],inventory_n:"",otss_category:"",condition:"",unit_from:"",in_operation:"",fault_document_requisites:"",date_of_receipt:null,number_of_receipt:"",requisites:"",transfer_date:null,otss_requisites:"",spsi_requisites:"",transfer_requisites:"",comment:"",last_check:null}}}},z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"addItemModal",attrs:{id:"add-item-modal",title:"Добавить запись в базу мат. ценностей",size:"xl","hide-footer":""},on:{hidden:t.clearForm,show:t.clearForm}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3"},[n("b-button",{attrs:{type:"submit",variant:"success",disabled:""===t.itemForm.name},on:{click:t.onSubmit}},[t._v("\n          Добавить запись\n        ")]),t._v(" "),n("b-button",{attrs:{href:"#/items/groupadd",variant:"light"},on:{click:t.sendForm}},[t._v("\n          Добавить несколько записей\n        ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n          Отмена\n        ")])],1),t._v(" "),n("b-container",{staticClass:"mt-3"},[n("b-row",[n("b-col",{attrs:{cols:t.colsize}},[n("form-template",{ref:"itemForm",attrs:{itemForm:t.itemForm,employeeInitials:t.employeeInitials}})],1),t._v(" "),n("b-col",[n("b-button",{on:{click:function(e){t.showComponents=!t.showComponents}}},[t._v("\n              "+t._s(t.showComponents?"Убрать компоненты":"Добавить компоненты")+"\n            ")]),t._v(" "),t.showComponents?n("component-list",{ref:"componentList"}):t._e()],1)],1)],1)],1)],1)},staticRenderFns:[]};var H=n("VU/8")(P,z,!1,function(t){n("1NWa")},null,null).exports,G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h4",{attrs:{id:"component"+t.component.id}},[t._v("\n      "+t._s(t.component.name?t.component.name:"Компонент "+(t.component.id+1))+"\n    ")]),t._v(" "),n("b-container",[n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"form-comp_name-group",label:"Название составляющей:","label-for":"form-comp_name-input"}},[n("b-form-input",{attrs:{id:"form-comp_name-input",type:"text",required:"",state:t.check(t.component.name,""),placeholder:"Введите название составляющей"},model:{value:t.component.name,callback:function(e){t.$set(t.component,"name",e)},expression:"component.name"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"12"}},[n("b-form-group",{attrs:{id:"form-comp_serial_n-group",label:"Заводской номер составляющей:","label-for":"form-comp_serial_n-input"}},[n("b-form-input",{attrs:{id:"form-comp_serial_n-input",type:"text",placeholder:"Введите заводской номер"},model:{value:t.component.serial_n,callback:function(e){t.$set(t.component,"serial_n",e)},expression:"component.serial_n"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_type-group",label:"Тип составляющей:","label-for":"form-comp_type-input"}},[n("b-form-input",{attrs:{id:"form-comp_type-input",type:"text"},model:{value:t.component.type,callback:function(e){t.$set(t.component,"type",e)},expression:"component.type"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_view-group",label:"Вид составляющей:","label-for":"form-comp_view-input"}},[n("b-form-input",{attrs:{id:"form-comp_view-input",type:"text"},model:{value:t.component.view,callback:function(e){t.$set(t.component,"view",e)},expression:"component.view"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_category-group",label:"Категория:","label-for":"form-comp_category-input"}},[n("b-form-input",{attrs:{id:"form-comp_category-input",type:"text"},model:{value:t.component.category,callback:function(e){t.$set(t.component,"category",e)},expression:"component.category"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_year-group",label:"Год выпуска:","label-for":"form-comp_year-input"}},[n("b-form-input",{attrs:{id:"form-comp_year-input",type:"text"},model:{value:t.component.year,callback:function(e){t.$set(t.component,"year",e)},expression:"component.year"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_cost-group",label:"Цена:","label-for":"form-comp_cost-input"}},[n("b-form-input",{attrs:{id:"form-comp_cost-input",type:"text"},model:{value:t.component.cost,callback:function(e){t.$set(t.component,"cost",e)},expression:"component.cost"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_object-group",label:"Объект:","label-for":"form-comp_object-input"}},[n("b-form-input",{attrs:{id:"form-comp_object-input",type:"text"},model:{value:t.component.location.object,callback:function(e){t.$set(t.component.location,"object",e)},expression:"component.location.object"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_corpus-group",label:"Корпус:","label-for":"form-comp_corpus-input"}},[n("b-form-input",{attrs:{id:"form-comp_corpus-input",type:"text"},model:{value:t.component.location.corpus,callback:function(e){t.$set(t.component.location,"corpus",e)},expression:"component.location.corpus"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_unit-group",label:"Подразделение:","label-for":"form-comp_unit-input"}},[n("b-form-input",{attrs:{id:"form-comp_unit-input",type:"text"},model:{value:t.component.location.unit,callback:function(e){t.$set(t.component.location,"unit",e)},expression:"component.location.unit"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[n("b-form-group",{attrs:{id:"form-comp_cabinet-group",label:"Кабинет:","label-for":"form-comp_cabinet-input"}},[n("b-form-input",{attrs:{id:"form-comp_cabinet-input",type:"text"},model:{value:t.component.location.cabinet,callback:function(e){t.$set(t.component.location,"cabinet",e)},expression:"component.location.cabinet"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var K=n("VU/8")({name:"ComponentCard",props:["components","component"],data:function(){return{}},methods:{check:function(t,e){return t!==e}}},G,!1,function(t){n("3VqN")},"data-v-9a09cfda",null).exports,Y={name:"editModal",props:["employeeInitials","editItem"],components:{ComponentCard:K,FormTemplate:V},data:function(){return{otssCategories:[1,2,3,"Не секретно"],conditions:["Исправно","Неисправно"],operation:["Используется","Не используется"],itemForm:{components:[]},index:0,showComponents:!1}},computed:{colsize:function(){return this.showComponents?6:10}},methods:{fetchEmployees:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/employee/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.employeeList=e.sent;case 6:case"end":return e.stop()}},e,t)}))()},onReset:function(t){t.preventDefault(),this.$refs.editItemModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.editItemModal.hide();var e=this.itemForm;this.editItem(e)},scrollIntoView:function(t){t.preventDefault();var e=t.target.getAttribute("href"),n=e?document.querySelector(e):null;n&&(this.$refs.content.scrollTop=n.offsetTop)},addComponent:function(){var t={id:this.index,name:"",serial_n:"",category:"",type:"",view:"",year:"",cost:"",location:{object:"",corpus:"",cabinet:"",unit:""}};this.itemForm.components.push(t),this.index+=1},deleteLastComponent:function(){this.itemForm.components.splice(this.itemForm.components.length-1,1),this.index-=1},showComponentForm:function(){this.showComponents?(this.showComponents=!1,this.itemForm.components=[],this.index=0):(this.showComponents=!0,this.addComponent())}}},W={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{ref:"editItemModal",attrs:{id:"edit-item-modal",title:"Изменить запись в базе мат. ценностей",size:"xl","hide-footer":""}},[n("b-form",{staticClass:"w-100",on:{submit:t.onSubmit,reset:t.onReset}},[n("div",{staticClass:"submit-reset-buttons mt-3"},[n("b-button",{attrs:{type:"submit",disabled:""===t.itemForm.name,variant:"primary"}},[t._v("\n        Изменить запись\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"}},[t._v("Отмена")])],1),t._v(" "),n("b-container",{staticClass:"mt-3"},[n("b-row",[n("b-col",{attrs:{cols:t.colsize}},[n("form-template",{attrs:{itemForm:t.itemForm,employeeInitials:t.employeeInitials}})],1),t._v(" "),n("b-col",[n("b-button",{on:{click:t.showComponentForm}},[t._v("\n            "+t._s(t.showComponents?"Убрать компоненты":"Добавить компоненты")+"\n          ")]),t._v(" "),t.showComponents?n("b-card",{staticClass:"mt-3",attrs:{"no-body":""}},[n("b-nav",{directives:[{name:"b-scrollspy",rawName:"v-b-scrollspy:nav-scroller",arg:"nav-scroller"}],attrs:{slot:"header",pills:"","card-header":""},slot:"header"},t._l(t.itemForm.components,function(e){return n("b-nav-item",{key:e.id,attrs:{href:"#component"+e.id},on:{click:t.scrollIntoView}},[t._v("\n                "+t._s(e.name?e.name:"Компонент "+(e.id+1))+"\n              ")])}),1),t._v(" "),n("b-card-body",{ref:"content",staticStyle:{position:"relative",height:"650px","overflow-y":"scroll"},attrs:{id:"nav-scroller"}},[t._l(t.itemForm.components,function(e){return n("component-card",{key:e.id,ref:"componentCard",refInFor:!0,attrs:{components:t.itemForm.components,component:e}})}),t._v(" "),n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("b-button",{attrs:{variant:"primary"},on:{click:t.addComponent}},[t._v("\n                    Добавить компонент\n                  ")])],1),t._v(" "),n("b-col",{attrs:{cols:"6"}},[t.itemForm.components.length>0?n("b-button",{attrs:{variant:"danger"},on:{click:t.deleteLastComponent}},[t._v("\n                    Удалить компонент\n                  ")]):t._e()],1)],1)],2)],1):t._e()],1)],1)],1)],1)],1)},staticRenderFns:[]};var B=n("VU/8")(Y,W,!1,function(t){n("bM+e")},null,null).exports,Q={name:"FieldModalForm",props:["item","itemField","id"],data:function(){return{form:{}}},methods:{initForm:function(){for(var t in this.item)this.form.key=this.item.key},editItem:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t._id,n.next=3,fetch("http://localhost:8000/api/v1/item/"+o+"/",{method:"PUT",body:p()(t),headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return r=n.sent,n.next=6,r.json();case 6:if(i=n.sent,console.log(p()(i)),202===r.status){n.next=16;break}return n.t0=alert,n.t1=p.a,n.next=13,r.json();case 13:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3);case 16:return n.next=18,e.fetchItems();case 18:case"end":return n.stop()}},n,e)}))()},onReset:function(t){for(var e in t.preventDefault(),this.$refs.fieldModalForm.hide(),this.form)this.form.key=""},onSubmit:function(t){t.preventDefault(),this.$refs.fieldModalForm.hide();var e=this.form;for(var n in this.editItem(e),this.form)this.form.key=""}}},Z={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"name",attrs:{centered:"",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-group",{attrs:{id:"form-category-group",label:"","label-for":"form-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",value:t.form[t.itemField]},model:{value:t.form[t.itemField],callback:function(e){t.$set(t.form,t.itemField,e)},expression:"form[itemField]"}})],1)],1)])],1)],1)},staticRenderFns:[]};var J=n("VU/8")(Q,Z,!1,function(t){n("1s03")},"data-v-7d060f16",null).exports,X={name:"ItemList",components:{VueRangeSlider:S.a,AddModal:H,EditModal:B,Filters:M,ConfirmForm:w,FieldModalForm:J},data:function(){return{dismissCountDown:0,dismissCountDownError:0,otss:[1,2,3,"Не секретно"],units:[],conditions:["Исправно","Неисправно"],operation:["Используется","Не используется"],m:"",editableRow:"",dynamicId:"confirm-modal",noCollapse:!1,full:!1,sortBy:"name",componentFields:["index",{key:"name",label:"Наименование"},{key:"serial_n",label:"Серийный номер"},{key:"category",label:"Категория"},{key:"type",label:"Тип"},{key:"view",label:"Вид"},{key:"location",label:"Местонахождение"}],titles:[{key:"Наименование",show:!0},{key:"Компоненты",show:!1},{key:"Ответственный сотрудник",show:!0},{key:"Инвентарный номер",show:!0},{key:"Категория ОТСС",show:!1},{key:"Состояние",show:!0},{key:"Откуда поступила",show:!0},{key:"Используется?",show:!0},{key:"Документы о неисправности",show:!1},{key:"Дата поступления на учет",show:!0},{key:"Номер требования о поступлении на учет",show:!1},{key:"Реквизиты книги учета мат. ценностей",show:!1},{key:"Дата передачи во временное пользование",show:!1},{key:"Реквизиты документа о категории ОТСС",show:!1},{key:"Реквизиты документа о прохождении СПСИ",show:!1},{key:"Реквизиты о передаче в пользование",show:!0},{key:"Дата последней проверки",show:!0},{key:"Примечания",show:!0},{key:"Сотрудник, которому передали в пользование",show:!1}],itemFields:[{key:"edit_remove",stickyColumn:!0,class:"text-center"},{key:"selected",stickyColumn:!0,isRowHeader:!0,class:"text-center"},{key:"index",label:"Номер",class:"text-center"},{key:"name",label:"Наименование",sortable:!0,class:"text-center"},{key:"components",label:"Компоненты",class:"text-center"},{key:"responsible",label:"Ответственный сотрудник",sortable:!0,class:"text-center"},{key:"inventory_n",label:"Инвентарный номер",sortable:!0,class:"text-center"},{key:"otss_category",label:"Категория ОТСС",sortable:!0,class:"text-center"},{key:"condition",label:"Состояние",sortable:!0,class:"text-center"},{key:"unit_from",label:"Откуда поступила",sortable:!0,class:"text-center"},{key:"in_operation",label:"Используется?",sortable:!0,class:"text-center"},{key:"fault_document_requisites",label:"Документы о неисправности",sortable:!0,class:"text-center"},{key:"date_of_receipt",label:"Дата поступления на учет",sortable:!0,class:"text-center"},{key:"number_of_receipt",label:"Номер требования о поступлении на учет",sortable:!0,class:"text-center"},{key:"requisites",label:"Реквизиты книги учета мат. ценностей",sortable:!0,class:"text-center"},{key:"transfer_date",label:"Дата передачи во временное пользование",sortable:!0,class:"text-center"},{key:"otss_requisites",label:"Реквизиты документа о категории ОТСС",sortable:!0,class:"text-center"},{key:"spsi_requisites",label:"Реквизиты документа о прохождении СПСИ",sortable:!0,class:"text-center"},{key:"transfer_requisites",label:"Реквизиты о передаче в пользование",sortable:!0,class:"text-center"},{key:"last_check",label:"Дата последней проверки",sortable:!0,class:"text-center"},{key:"comment",label:"Примечания",sortable:!0,class:"text-center"},{key:"user",label:"Сотрудник, которому передали в пользование",sortable:!0,class:"text-center"}],items:[],selectedItem:{},selected:[],sliderValue:405,employeeList:[],employeeInitials:[],filters:{responsible:null,otss_category:null,condition:null,in_operation:null},fuseString:""}},computed:{message:function(){return this.selected&&(1===this.selected.length?this.m="Вы уверены, что хотите удалить запись?":this.m="Вы уверены, что хотите удалить выбранные записи?"),this.m},fields:function(){var t=this,e=[];ue.$on("clippedTable",function(){for(var e=[1,4,8,10,11,12,13,14,18],n=0;n<e.length;n++)t.titles[e[n]].show=!1});for(var n=0;n<this.itemFields.length;n++)e.push(this.itemFields[n]);for(var o=0;o<this.titles.length;o++)!1===this.titles[o].show&&this.titles[o].key===this.itemFields[o+3].label&&e.splice(e.indexOf(this.itemFields[o+3]),1);return ue.$on("fullTable",function(){for(var n=0;n<t.itemFields.length;n++)e.push(t.itemFields[n]);for(var o=0;o<t.titles.length;o++)t.titles[o].show=!0}),e}},methods:{countDownChanged:function(t){this.dismissCountDown=t},countDownChangedError:function(t){this.dismissCountDownError=t},showAlert:function(){this.dismissCountDown=2},showErrorAlert:function(){this.dismissCountDown=2},showFullTable:function(){this.full?(ue.$emit("clippedTable"),this.full=!1):(ue.$emit("fullTable"),this.full=!0)},hideColumn:function(t){for(var e=0;e<this.titles.length;e++)if(this.titles[e].key===t){this.titles[e].show=!1;break}},getCurrentDate:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i,a;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=new Date,r=String(o.getDate()).padStart(2,"0"),i=String(o.getMonth()+1).padStart(2,"0"),a=o.getFullYear(),o=a+"-"+i+"-"+r,t.last_check=o,n.next=8,e.editItem(t);case 8:case"end":return n.stop()}},n,e)}))()},fetchOTSS:function(){var t=this;return a()(s.a.mark(function e(){var n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/otss/");case 2:return n=e.sent,e.next=5,n.json();case 5:for(t.otss=e.sent,t.otss=t.otss.otss,o=[],r=0;r<t.otss.length;r++)o.push(t.otss[r].category);t.otss=o;case 10:case"end":return e.stop()}},e,t)}))()},fetchUnits:function(){var t=this;return a()(s.a.mark(function e(){var n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/unit/");case 2:return n=e.sent,e.next=5,n.json();case 5:for(t.units=e.sent,t.units=t.units.units,o=[],r=0;r<t.units.length;r++)o.push(t.units[r].unit);t.units=o;case 10:case"end":return e.stop()}},e,t)}))()},stickyHeaderHeightToString:function(){return this.sliderValue.toString()+"px"},fetchEmployees:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/employee/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.employeeList=e.sent,t.employeeList=t.employeeList.employees,t.employeeToString();case 8:case"end":return e.stop()}},e,t)}))()},fetchItems:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/item/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.items=e.sent,t.items=t.items.items;case 7:case"end":return e.stop()}},e,t)}))()},selectToRemoveItem:function(t){var e=this;return a()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.selected.push(t);case 1:case"end":return n.stop()}},n,e)}))()},removeItems:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i,a,c,l,u,m;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:o=!0,r=!1,i=void 0,n.prev=3,a=q()(t);case 5:if(o=(c=a.next()).done){n.next=25;break}return l=c.value,u=l._id,n.next=10,fetch("http://localhost:8000/api/v1/item/"+u+"/",{method:"DELETE",headers:{Accept:"application/json","Content-type":"application/json"}});case 10:if(204===(m=n.sent).status){n.next=20;break}return n.t0=alert,n.t1=p.a,n.next=16,m.json();case 16:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3),e.showErrorAlert();case 20:return n.next=22,e.fetchItems();case 22:o=!0,n.next=5;break;case 25:n.next=31;break;case 27:n.prev=27,n.t4=n.catch(3),r=!0,i=n.t4;case 31:n.prev=31,n.prev=32,!o&&a.return&&a.return();case 34:if(n.prev=34,!r){n.next=37;break}throw i;case 37:return n.finish(34);case 38:return n.finish(31);case 39:e.showAlert(),e.selected=[];case 41:case"end":return n.stop()}},n,e,[[3,27,31,39],[32,,34,38]])}))()},editItem:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t._id,n.next=3,fetch("http://localhost:8000/api/v1/item/"+o+"/",{method:"PUT",body:p()(t),headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return r=n.sent,n.next=6,r.json();case 6:if(i=n.sent,console.log(p()(i)),202===r.status){n.next=17;break}return n.t0=alert,n.t1=p.a,n.next=13,r.json();case 13:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3),e.showErrorAlert();case 17:return e.showAlert(),n.next=20,e.fetchItems();case 20:case"end":return n.stop()}},n,e)}))()},onRowSelected:function(t){this.selected=t,this.selectedItem=this.selected[0]},selectAllRows:function(){0===this.selected.length?this.$refs.selectableTable.selectAllRows():(this.selected=[],this.$refs.selectableTable.clearSelected())},employeeToString:function(){for(var t=0;t<this.employeeList.length;t++)this.employeeInitials.push(this.employeeList[t].surname+" "+this.employeeList[t].name[0]+"."+this.employeeList[t].secname[0]+".")},selectToEditItem:function(t){this.$refs.editItemModal.itemForm=t},setFilters:function(){this.filters=this.$refs.filtersForList.filters},filterFunction:function(t,e){var n=e.responsible,o=e.otss_category,r=e.condition,s=e.in_operation;return[!n||n===t.responsible,!o||o===t.otss_category,!r||r===t.condition,!s||s===t.in_operation].every(Boolean)},fuseSearch:function(){var t=this;this.$search(this.fuseString,this.items,{tokenize:!0,matchAllTokens:!0,defaultAll:!1,keys:["name","responsible","inventory_n"]}).then(function(e){t.items=e}),""==this.fuseString&&this.fetchItems()},sendToEditItems:function(){this.$parent.$data.dataForChildren=this.selected},showFieldFromModal:function(t){this.$refs[t].show()},onReset:function(t){this.$refs[t].hide()},onSubmit:function(t,e){this.$refs[t].hide();var n={_id:e._id,name:e.name,user:e.user,responsible:e.responsible,components:e.components,inventory_n:e.inventory_n,otss_category:e.otss_category,condition:e.condition,unit_from:e.unit_from,in_operation:e.in_operation,fault_document_requisites:e.fault_document_requisites,date_of_receipt:e.date_of_receipt,number_of_receipt:e.number_of_receipt,requisites:e.requisites,transfer_date:e.transfer_date,otss_requisites:e.otss_requisites,spsi_requisites:e.spsi_requisites,transfer_requisites:e.transfer_requisites,comment:e.comment,last_check:e.last_check};this.showAlert(),this.editItem(n),this.fetchItems()}},watch:{fuseString:function(){this.fuseSearch()}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchItems();case 2:return e.next=4,t.fetchEmployees();case 4:return e.next=6,t.setFilters();case 6:return e.next=8,t.fetchOTSS();case 8:return e.next=10,t.fetchUnits();case 10:return e.next=12,ue.$on("updateList",function(){return t.fetchItems()});case 12:return e.next=14,ue.$on("cancel",function(){t.selected=[]});case 14:return e.next=16,ue.$on("resetFilters",function(e){t.filters=e,t.fuseString=null});case 16:case"end":return e.stop()}},e,t)}))()}},tt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-row",[n("b-col",[0!==t.selected.length?n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.confirm-modal",modifiers:{"confirm-modal":!0}}],staticClass:"mt-3",attrs:{variant:"danger"}},[n("b-icon",{attrs:{icon:"trash","data-toggle":"tooltip","data-placement":"top","font-scale":"1","aria-hidden":"false"}}),t._v("\n            Удалить\n          ")],1):t._e()],1),t._v(" "),n("b-col",[0!==t.selected.length?n("b-button",{staticClass:"mt-3",attrs:{variant:"primary",href:"#/items/groupedit"},on:{click:t.sendToEditItems}},[n("b-icon",{attrs:{icon:"pencil-square","data-toggle":"tooltip","data-placement":"top","font-scale":"1","aria-hidden":"false"}}),t._v("\n            Редактровать\n          ")],1):t._e()],1),t._v(" "),n("b-col",[n("b-button",{staticClass:"mt-3",on:{click:t.selectAllRows}},[n("b-icon",{attrs:{icon:"check2-all","data-toggle":"tooltip","data-placement":"top","font-scale":"1","aria-hidden":"false"}}),t._v("\n            "+t._s(0===t.selected.length?"Выбрать записи":"Снять отметку")+"\n          ")],1)],1),t._v(" "),n("b-col",[n("b-dropdown",{staticClass:"mt-3",attrs:{text:"Поля таблицы",variant:"light",role:"menu"}},[n("b-dropdown-text",{staticClass:"text-nowrap"},[n("b-form-checkbox",{staticStyle:{"text-align":"left"},on:{change:t.showFullTable}},[t._v("\n                "+t._s(t.full?"Неполная таблица":"Полная таблица")+"\n              ")])],1),t._v(" "),n("b-dropdown-text",{staticClass:"text-nowrap"},t._l(t.titles,function(e){return n("b-form-checkbox",{key:e.key,staticStyle:{"text-align":"left"},on:{click:function(t){e.show=!e.show}},model:{value:e.show,callback:function(n){t.$set(e,"show",n)},expression:"title['show']"}},[t._v("\n                "+t._s(e.key)+"\n              ")])}),1)],1)],1),t._v(" "),n("b-col",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.add-item-modal",modifiers:{"add-item-modal":!0}}],staticClass:"mt-3",attrs:{variant:"success"}},[n("b-icon",{attrs:{icon:"download","data-toggle":"tooltip","data-placement":"top","font-scale":"1","aria-hidden":"false"}}),t._v("\n            Добавить запись\n          ")],1)],1)],1)],1),t._v(" "),n("filters",{ref:"filtersForList",staticClass:"mt-3",attrs:{"employee-initials":t.employeeInitials}}),t._v(" "),n("b-alert",{attrs:{show:t.dismissCountDown,dismissible:""},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[n("p",[n("b-icon",{attrs:{icon:"check2",variant:"success","font-scale":"2","data-toggle":"tooltip","data-placement":"top"}}),t._v("\n        Успешно\n      ")],1)]),t._v(" "),n("b-alert",{attrs:{show:t.dismissCountDownError,dismissible:""},on:{dismissed:function(e){t.dismissCountDownError=0},"dismiss-count-down":t.countDownChangedError}},[n("p",[n("b-icon",{attrs:{icon:"x",variant:"danger","font-scale":"2","data-toggle":"tooltip","data-placement":"top"}}),t._v("\n        Ошибка\n      ")],1)]),t._v(" "),n("b-table",{ref:"selectableTable",staticClass:"mt-3",attrs:{striped:"",hover:"",bordered:"",selectable:"","sort-by":t.sortBy,"sticky-header":"380px",items:t.items,fields:t.fields,"filter-function":t.filterFunction,filter:t.filters},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"row-selected":t.onRowSelected},scopedSlots:t._u([{key:"head()",fn:function(e){return[n("div",{staticClass:"text-nowrap",attrs:{title:e.label}},[t._v("\n          "+t._s(e.label)+"\n          "),n("b-icon",{staticClass:"mt-1",attrs:{icon:"x",variant:"dark","data-toggle":"tooltip","data-placement":"top",title:"Скрыть колонку","font-scale":"1.5"},on:{click:function(n){return t.hideColumn(e.label)}}})],1)]}},{key:"head(unit_from)",fn:function(e){return[n("div",{staticClass:"text-nowrap",attrs:{title:"Подразделение, откуда поступила мат. ценность"}},[t._v("\n          "+t._s(e.label)+"\n          "),n("b-icon",{staticClass:"mt-1",attrs:{icon:"x",variant:"dark","data-toggle":"tooltip","data-placement":"top",title:"Скрыть колонку","font-scale":"1.5"},on:{click:function(n){return t.hideColumn(e.label)}}})],1)]}},{key:"head(transfer_requisites)",fn:function(e){return[n("div",{staticClass:"text-nowrap",attrs:{title:"Реквизиты о передаче во временное пользование"}},[t._v("\n          "+t._s(e.label)+"\n          "),n("b-icon",{staticClass:"mt-1",attrs:{icon:"x",variant:"dark","data-toggle":"tooltip","data-placement":"top",title:"Скрыть колонку","font-scale":"1.5"},on:{click:function(n){return t.hideColumn(e.label)}}})],1)]}},{key:"head(selected)",fn:function(e){return[n("div",[t._v("      ")])]}},{key:"head(index)",fn:function(e){return[n("div",[t._v("Номер")])]}},{key:"cell(index)",fn:function(e){return[t._v("\n        "+t._s(e.index+1)+"\n      ")]}},{key:"cell(name)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("name"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.name?e.item.name:" "))])]),t._v(" "),n("b-modal",{ref:"name",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-textarea",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",value:t.editableRow.name},model:{value:t.editableRow.name,callback:function(e){t.$set(t.editableRow,"name",e)},expression:"editableRow.name"}}),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("name",t.editableRow)}}},[t._v("Изменить")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("name")}}},[t._v("Отмена")])],1)],1)])],1)]}},{key:"cell(responsible)",fn:function(e){return[n("div",{staticClass:"text-nowrap",on:{dblclick:function(n){t.showFieldFromModal("responsible"),t.editableRow=e.item}}},[t._v("\n          "+t._s(e.item.responsible?e.item.responsible:" ")+"\n        ")]),t._v(" "),n("b-modal",{ref:"responsible",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-group",{attrs:{"label-for":"form-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",list:"employee-list",value:t.editableRow.responsible},model:{value:t.editableRow.responsible,callback:function(e){t.$set(t.editableRow,"responsible",e)},expression:"editableRow.responsible"}}),t._v(" "),n("datalist",{attrs:{id:"employee-list"}},t._l(t.employeeInitials,function(e){return n("option",[t._v(t._s(e))])}),0)],1),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("responsible",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("responsible")}}},[t._v("Отмена")])],1)],1)])],1)]}},{key:"cell(user)",fn:function(e){return[n("div",{staticClass:"text-nowrap",on:{dblclick:function(n){t.showFieldFromModal("user"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.user?e.item.user:" "))])]),t._v(" "),n("b-modal",{ref:"user",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-group",{attrs:{"label-for":"form-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",list:"user-list",value:t.editableRow.user},model:{value:t.editableRow.user,callback:function(e){t.$set(t.editableRow,"user",e)},expression:"editableRow.user"}}),t._v(" "),n("datalist",{attrs:{id:"user-list"}},t._l(t.employeeInitials,function(e){return n("option",[t._v(t._s(e))])}),0)],1),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("user",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("user")}}},[t._v("Отмена")])],1)],1)])],1)]}},{key:"cell(inventory_n)",fn:function(e){return[n("div",{staticClass:"text-nowrap",on:{dblclick:function(n){t.showFieldFromModal("inventory_n"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.inventory_n?e.item.inventory_n:" "))])]),t._v(" "),n("b-modal",{ref:"inventory_n",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-group",{attrs:{"label-for":"form-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",value:t.editableRow.inventory_n},model:{value:t.editableRow.inventory_n,callback:function(e){t.$set(t.editableRow,"inventory_n",e)},expression:"editableRow.inventory_n"}})],1),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("inventory_n",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("inventory_n")}}},[t._v("Отмена")])],1)],1)])],1)]}},{key:"cell(in_operation)",fn:function(e){return[n("div",{staticClass:"text-nowrap",on:{dblclick:function(n){t.showFieldFromModal("in_operation"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.in_operation?e.item.in_operation:" "))])]),t._v(" "),n("b-modal",{ref:"in_operation",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-group",{attrs:{"label-for":"form-select"}},[n("b-form-select",{staticClass:"mt-3",attrs:{id:"form-select",type:"text",options:t.operation,value:t.editableRow.in_operation},model:{value:t.editableRow.in_operation,callback:function(e){t.$set(t.editableRow,"in_operation",e)},expression:"editableRow.in_operation"}})],1),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("in_operation",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("in_operation")}}},[t._v("Отмена")])],1)],1)])],1)]}},{key:"cell(condition)",fn:function(e){return[n("div",{staticClass:"text-nowrap",on:{dblclick:function(n){t.showFieldFromModal("condition"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.condition?e.item.condition:" "))])]),t._v(" "),n("b-modal",{ref:"condition",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-group",{attrs:{"label-for":"form-select"}},[n("b-form-select",{staticClass:"mt-3",attrs:{id:"form-select",type:"text",options:t.conditions,value:t.editableRow.condition},model:{value:t.editableRow.condition,callback:function(e){t.$set(t.editableRow,"condition",e)},expression:"editableRow.condition"}})],1),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("condition",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("condition")}}},[t._v("Отмена")])],1)],1)])],1)]}},{key:"cell(unit_from)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("unit_from"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.unit_from?e.item.unit_from:" "))])]),t._v(" "),n("b-modal",{ref:"unit_from",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",list:"unit_from-list",value:t.editableRow.unit_from},model:{value:t.editableRow.unit_from,callback:function(e){t.$set(t.editableRow,"unit_from",e)},expression:"editableRow.unit_from"}}),t._v(" "),n("datalist",{attrs:{id:"unit_from-list"}},t._l(t.units,function(e){return n("option",[t._v(t._s(e))])}),0),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("unit_from",t.editableRow)}}},[t._v("Изменить")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("unit_from")}}},[t._v("Отмена")])],1)],1)])],1)]}},{key:"cell(fault_document_requisites)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("fault_document_requisites"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.fault_document_requisites?e.item.fault_document_requisites:" "))])]),t._v(" "),n("b-modal",{ref:"fault_document_requisites",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",value:t.editableRow.fault_document_requisites},model:{value:t.editableRow.fault_document_requisites,callback:function(e){t.$set(t.editableRow,"fault_document_requisites",e)},expression:"editableRow.fault_document_requisites"}}),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("fault_document_requisites",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("fault_document_requisites")}}},[t._v("\n                  Отмена\n                ")])],1)],1)])],1)]}},{key:"cell(number_of_receipt)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("number_of_receipt"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.number_of_receipt?e.item.number_of_receipt:" "))])]),t._v(" "),n("b-modal",{ref:"number_of_receipt",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",value:t.editableRow.number_of_receipt},model:{value:t.editableRow.number_of_receipt,callback:function(e){t.$set(t.editableRow,"number_of_receipt",e)},expression:"editableRow.number_of_receipt"}}),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("number_of_receipt",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("number_of_receipt")}}},[t._v("\n                  Отмена\n                ")])],1)],1)])],1)]}},{key:"cell(requisites)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("requisites"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.requisites?e.item.requisites:" "))])]),t._v(" "),n("b-modal",{ref:"requisites",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-textarea",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",value:t.editableRow.requisites},model:{value:t.editableRow.requisites,callback:function(e){t.$set(t.editableRow,"requisites",e)},expression:"editableRow.requisites"}}),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("requisites",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("requisites")}}},[t._v("\n                  Отмена\n                ")])],1)],1)])],1)]}},{key:"head(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[t._v("Изменить/Удалить")])]}},{key:"cell(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.edit-item-modal",modifiers:{"edit-item-modal":!0}}],attrs:{icon:"pencil-square",variant:"warning","data-toggle":"tooltip","data-placement":"top",title:"Редактировать","font-scale":"2"},on:{click:function(n){return t.selectToEditItem(e.item)}}}),t._v(" "),n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.confirm-modal",modifiers:{"confirm-modal":!0}}],attrs:{icon:"trash",variant:"danger","font-scale":"2","data-toggle":"tooltip","data-placement":"top",title:"Удалить"},on:{click:function(n){return t.selectToRemoveItem(e.item)}}})],1)]}},{key:"cell(components)",fn:function(t){return[t.detailsShowing?n("b-icon",{attrs:{icon:"eye-slash","font-scale":"2"},on:{click:t.toggleDetails}}):n("b-icon",{attrs:{icon:"eye","font-scale":"2"},on:{click:t.toggleDetails}})]}},{key:"row-details",fn:function(e){return[n("b-table",{attrs:{resposive:"",items:e.item.components,fields:t.componentFields},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v("\n            "+t._s(e.index+1)+"\n          ")]}},{key:"cell(location)",fn:function(e){return[t._v("\n            Объект: "+t._s(e.item.location.object)),n("br"),t._v("\n            Корпус: "+t._s(e.item.location.corpus)),n("br"),t._v("\n            Кабинет: "+t._s(e.item.location.cabinet)),n("br"),t._v("\n            Подразделение: "+t._s(e.item.location.unit)+"\n          ")]}}],null,!0)})]}},{key:"cell(selected)",fn:function(e){return[e.rowSelected?[n("b-icon",{attrs:{icon:"check2","data-toggle":"tooltip","data-placement":"top",title:"Выбрано","font-scale":"1.5","aria-hidden":"false"}}),t._v(" "),n("span",{staticClass:"sr-only"},[t._v("Selected")])]:[n("span",{attrs:{"aria-hidden":"true"}},[t._v(" ")]),t._v(" "),n("span",{staticClass:"sr-only"},[t._v("Not selected")])]]}},{key:"cell(otss_requisites)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("otss_requisites"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.otss_requisites?e.item.otss_requisites:" "))])]),t._v(" "),n("b-modal",{ref:"otss_requisites",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-textarea",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",value:t.editableRow.otss_requisites},model:{value:t.editableRow.otss_requisites,callback:function(e){t.$set(t.editableRow,"otss_requisites",e)},expression:"editableRow.otss_requisites"}}),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("otss_requisites",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("otss_requisites")}}},[t._v("\n                  Отмена\n                ")])],1)],1)])],1)]}},{key:"cell(spsi_requisites)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("spsi_requisites"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.spsi_requisites?e.item.spsi_requisites:" "))])]),t._v(" "),n("b-modal",{ref:"spsi_requisites",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-textarea",{staticClass:"mt-3",attrs:{id:"form-input",type:"",value:t.editableRow.spsi_requisites},model:{value:t.editableRow.spsi_requisites,callback:function(e){t.$set(t.editableRow,"spsi_requisites",e)},expression:"editableRow.spsi_requisites"}}),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("spsi_requisites",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("spsi_requisites")}}},[t._v("\n                  Отмена\n                ")])],1)],1)])],1)]}},{key:"cell(transfer_requisites)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("transfer_requisites"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.transfer_requisites?e.item.transfer_requisites:" "))])]),t._v(" "),n("b-modal",{ref:"transfer_requisites",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-textarea",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",value:t.editableRow.transfer_requisites},model:{value:t.editableRow.transfer_requisites,callback:function(e){t.$set(t.editableRow,"transfer_requisites",e)},expression:"editableRow.transfer_requisites"}}),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("transfer_requisites",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("transfer_requisites")}}},[t._v("\n                  Отмена\n                ")])],1)],1)])],1)]}},{key:"cell(comment)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("comment"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.comment?e.item.comment:" "))])]),t._v(" "),n("b-modal",{ref:"comment",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-textarea",{staticClass:"mt-3",attrs:{id:"form-input",type:"text",value:t.editableRow.comment},model:{value:t.editableRow.comment,callback:function(e){t.$set(t.editableRow,"comment",e)},expression:"editableRow['comment']"}}),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("comment",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("comment")}}},[t._v("\n                  Отмена\n                ")])],1)],1)])],1)]}},{key:"cell(date_of_receipt)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("date_of_receipt"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.date_of_receipt?e.item.date_of_receipt:" "))])]),t._v(" "),n("b-modal",{ref:"date_of_receipt",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-datepicker",{attrs:{"aria-controls":"date_of_receipt-input","today-button":"","reset-button":"","close-button":"",placeholder:"Выберите дату","date-format-options":{day:"2-digit",month:"short",year:"numeric"}},model:{value:t.editableRow.date_of_receipt,callback:function(e){t.$set(t.editableRow,"date_of_receipt",e)},expression:"editableRow.date_of_receipt"}}),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("date_of_receipt",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("date_of_receipt")}}},[t._v("\n                  Отмена\n                ")])],1)],1)])],1)]}},{key:"cell(transfer_date)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.showFieldFromModal("transfer_date"),t.editableRow=e.item}}},[n("p",[t._v(t._s(e.item.transfer_date?e.item.transfer_date:" "))])]),t._v(" "),n("b-modal",{ref:"transfer_date",attrs:{centered:"",title:"Измените значение поля",size:"sm","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"container mt-3"},[n("b-form-datepicker",{attrs:{"aria-controls":"transfer_date-input","today-button":"","reset-button":"","close-button":"",placeholder:"Выберите дату","date-format-options":{day:"2-digit",month:"short",year:"numeric"}},model:{value:t.editableRow.transfer_date,callback:function(e){t.$set(t.editableRow,"transfer_date",e)},expression:"editableRow.transfer_date"}}),t._v(" "),n("div",{staticClass:"mt-3"},[n("b-button",{attrs:{variant:"success"},on:{click:function(e){return t.onSubmit("transfer_date",t.editableRow)}}},[t._v("\n                  Изменить\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"danger"},on:{click:function(e){return t.onReset("transfer_date")}}},[t._v("\n                  Отмена\n                ")])],1)],1)])],1)]}},{key:"cell(last_check)",fn:function(e){return[n("div",{on:{dblclick:function(n){t.editableRow=e.item,t.getCurrentDate(t.editableRow)}}},[n("p",[t._v(t._s(e.item.last_check?e.item.last_check:" "))])])]}}])}),t._v(" "),n("add-modal",{ref:"addItemModal",attrs:{"employee-initials":t.employeeInitials}}),t._v(" "),n("edit-modal",{ref:"editItemModal",attrs:{"employee-initials":t.employeeInitials,"edit-item":t.editItem}}),t._v(" "),n("confirm-form",{attrs:{payload:t.selected,"dynamic-id":t.dynamicId,message:t.message,op:t.removeItems}})],1)},staticRenderFns:[]};var et=n("VU/8")(X,tt,!1,function(t){n("Yoxc")},null,null).exports,nt={name:"GroupAddForm",components:{FormTemplate:V,ComponentList:N},props:["employeeInitials","itemForm"],data:function(){return{showComponents:!1}},computed:{colsize:function(){return this.showComponents?6:10}},methods:{setComponents:function(){var t=this,e=this.$parent.$data.listOfNewItems.find(function(e){return e.index===t.itemForm.index}),n=this.$parent.$data.listOfNewItems.indexOf(e);this.$parent.$data.listOfNewItems[n].components=this.$refs.componentList.createComponentList()}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue.$on("fetchComponents",function(){return t.setComponents()});case 2:case"end":return e.stop()}},e,t)}))()}},ot={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h5",[t._v("\n    "+t._s(t.itemForm.name?t.itemForm.name:"Материальная ценность "+(t.itemForm.index+1))+"\n  ")]),t._v(" "),n("b-form",[n("b-container",[n("b-row",[n("b-col",{attrs:{cols:t.colsize}},[n("form-template",{attrs:{itemForm:t.itemForm,employeeInitials:t.employeeInitials}})],1),t._v(" "),n("b-col",[n("b-button",{on:{click:function(e){t.showComponents=!t.showComponents}}},[t._v("\n            "+t._s(t.showComponents?"Убрать компоненты":"Добавить компоненты")+"\n          ")]),t._v(" "),t.showComponents?n("component-list",{ref:"componentList",staticClass:"mt-3",attrs:{payload:t.itemForm.components}}):t._e()],1)],1)],1)],1)],1)},staticRenderFns:[]};var rt={name:"GroupAddPage",components:{GroupAddForm:n("VU/8")(nt,ot,!1,function(t){n("2GWe")},null,null).exports},data:function(){return{index:0,show:!1,employeeList:[],employeeInitials:[],listOfNewItems:[]}},methods:{init:function(){if(null==this.$parent.$data.dataForChildren){this.listOfNewItems.push({index:null,name:"",user:"",responsible:"",components:[],inventory_n:"",otss_category:"",condition:"",unit_from:"",in_operation:"",fault_document_requisites:"",date_of_receipt:null,number_of_receipt:"",requisites:"",transfer_date:null,otss_requisites:"",spsi_requisites:"",transfer_requisites:"",comment:"",last_check:null}),this.index+=1}else this.listOfNewItems.push(this.$parent.$data.dataForChildren),this.listOfNewItems[0].index=this.index,this.index+=1,this.$parent.$data.dataForChildren=null},addForm:function(){var t={index:null,name:"",user:"",responsible:"",components:[],inventory_n:"",otss_category:"",condition:"",unit_from:"",in_operation:"",fault_document_requisites:"",date_of_receipt:null,number_of_receipt:"",requisites:"",transfer_date:null,otss_requisites:"",spsi_requisites:"",transfer_requisites:"",comment:"",last_check:null};t.index=this.index,this.listOfNewItems.push(t),this.index+=1},deleteLastForm:function(){this.listOfNewItems.splice(this.listOfNewItems.length-1,1),this.index-=1},scrollIntoView:function(t){t.preventDefault();var e=t.target.getAttribute("href"),n=e?document.querySelector(e):null;n&&(this.$refs.content.scrollTop=n.offsetTop)},employeeToString:function(){for(var t=0;t<this.employeeList.length;t++)this.employeeInitials.push(this.employeeList[t].surname+" "+this.employeeList[t].name[0]+"."+this.employeeList[t].secname[0]+".")},fetchEmployees:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/employee/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.employeeList=e.sent,t.employeeList=t.employeeList.employees,t.employeeToString();case 8:case"end":return e.stop()}},e,t)}))()},createItems:function(){var t=this;return a()(s.a.mark(function e(){var n,o,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ue.$emit("fetchComponents"),n=0;case 2:if(!(n<t.listOfNewItems.length)){e.next=18;break}return o={name:t.listOfNewItems[n].name,user:t.listOfNewItems[n].user,responsible:t.listOfNewItems[n].responsible,components:t.listOfNewItems[n].components,inventory_n:t.listOfNewItems[n].inventory_n,otss_category:t.listOfNewItems[n].otss_category,condition:t.listOfNewItems[n].condition,unit_from:t.listOfNewItems[n].unit_from,in_operation:t.listOfNewItems[n].in_operation,fault_document_requisites:t.listOfNewItems[n].fault_document_requisites,date_of_receipt:t.listOfNewItems[n].date_of_receipt,number_of_receipt:t.listOfNewItems[n].number_of_receipt,requisites:t.listOfNewItems[n].requisites,transfer_date:t.listOfNewItems[n].transfer_date,otss_requisites:t.listOfNewItems[n].otss_requisites,spsi_requisites:t.listOfNewItems[n].spsi_requisites,transfer_requisites:t.listOfNewItems[n].transfer_requisites,comment:t.listOfNewItems[n].comment,last_check:t.listOfNewItems[n].last_check},e.next=6,fetch("http://localhost:8000/api/v1/item/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:p()(o)});case 6:if(201===(r=e.sent).status){e.next=15;break}return e.t0=alert,e.t1=p.a,e.next=12,r.json();case 12:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 15:n++,e.next=2;break;case 18:t.listOfNewItems=[],t.index=0,t.init(),ue.$emit("updateList"),ue.$emit("clearComponentForm");case 23:case"end":return e.stop()}},e,t)}))()}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchEmployees();case 2:t.init();case 3:case"end":return e.stop()}},e,t)}))()}},st={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"mt-3"},[n("b-row",[n("b-col",{attrs:{cols:"2"}},[n("b-navbar",{directives:[{name:"b-scrollspy",rawName:"v-b-scrollspy:scrollspy-nested",arg:"scrollspy-nested"}],staticClass:"flex-column"},[n("b-nav",{attrs:{pills:"",vertical:""}},[t._l(t.listOfNewItems,function(e){return n("b-nav-item",{key:e.index,attrs:{href:"#item-"+e.index},on:{click:t.scrollIntoView}},[t._v("\n            "+t._s(e.name?e.name:"Материальная ценность "+(e.index+1))+"\n          ")])}),t._v(" "),n("b-button",{attrs:{variant:"light"},on:{click:t.addForm}},[t._v("+")]),t._v(" "),t.listOfNewItems.length>1?n("b-button",{staticClass:"mt-3",attrs:{variant:"danger"},on:{click:t.deleteLastForm}},[t._v("-")]):t._e(),t._v(" "),n("b-button",{attrs:{variant:"success"},on:{click:t.createItems}},[t._v("\n            "+t._s(1===t.listOfNewItems.length?"Добавить запись":"Добавить записи")+"\n          ")])],2)],1)],1),t._v(" "),n("b-col",{attrs:{cols:"10"}},[n("div",{ref:"content",staticStyle:{position:"relative",height:"550px","overflow-y":"scroll"},attrs:{id:"scrollspy-nested"}},t._l(t.listOfNewItems,function(e){return n("group-add-form",{key:e.index,attrs:{"item-form":e,"employee-initials":t.employeeInitials,id:"item-"+e.index}})}),1)])],1)],1)},staticRenderFns:[]};var it=n("VU/8")(rt,st,!1,function(t){n("NeZN")},null,null).exports,at={name:"GroupEditForm",components:{FormTemplate:V,ComponentCard:K},props:["employeeInitials","itemForm"],methods:{scrollIntoView:function(t){t.preventDefault();var e=t.target.getAttribute("href"),n=e?document.querySelector(e):null;n&&(this.$refs.content.scrollTop=n.offsetTop)}}},ct={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-col",{staticClass:"mt-3"},[n("h3",[t._v("\n    "+t._s(t.itemForm.name)+"\n  ")]),t._v(" "),n("b-form",[n("b-container",[n("b-row",[n("b-col",[n("form-template",{attrs:{"item-form":t.itemForm,"employee-initials":t.employeeInitials}})],1),t._v(" "),t.itemForm.components.length>0?n("b-col",[n("b-card",{attrs:{"no-body":""}},[n("b-nav",{directives:[{name:"b-scrollspy",rawName:"v-b-scrollspy:nav-scroller",arg:"nav-scroller"}],attrs:{slot:"header","card-header":""},slot:"header"},t._l(t.itemForm.components,function(e){return n("b-nav-item",{key:e.id,attrs:{href:"#component"+e.id},on:{click:t.scrollIntoView}},[t._v("\n                "+t._s(e.name?e.name:"Компонент "+e.id)+"\n              ")])}),1),t._v(" "),n("b-card-body",{ref:"content",staticStyle:{position:"relative",height:"650px","overflow-y":"scroll"},attrs:{id:"nav-scroller"}},t._l(t.itemForm.components,function(e){return n("component-card",{key:e.id,ref:"componentCard",refInFor:!0,attrs:{components:t.itemForm.components,component:e}})}),1)],1)],1):t._e()],1)],1)],1)],1)},staticRenderFns:[]};var lt={name:"GroupEditPage",components:{GroupEditForm:n("VU/8")(at,ct,!1,function(t){n("sNFE")},null,null).exports,ConfirmForm:w},data:function(){return{employeeInitials:[],employeeList:[],itemsForEdit:[],m:""}},methods:{employeeToString:function(){for(var t=0;t<this.employeeList.length;t++)this.employeeInitials.push(this.employeeList[t].surname+" "+this.employeeList[t].name[0]+"."+this.employeeList[t].secname[0]+".")},fetchEmployees:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/employee/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.employeeList=e.sent,t.employeeList=t.employeeList.employees,t.employeeToString();case 8:case"end":return e.stop()}},e,t)}))()},scrollIntoView:function(t){t.preventDefault();var e=t.target.getAttribute("href"),n=e?document.querySelector(e):null;n&&(this.$refs.items.scrollTop=n.offsetTop)},editItems:function(){var t=this;return a()(s.a.mark(function e(){var n,o,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<t.itemsForEdit.length)){e.next=21;break}return o=t.itemsForEdit[n]._id,e.next=5,fetch("http://localhost:8000/api/v1/item/"+o+"/",{method:"PUT",body:p()(t.itemsForEdit[n]),headers:{Accept:"application/json","Content-type":"application/json"}});case 5:return r=e.sent,e.next=8,r.json();case 8:if(i=e.sent,console.log(p()(i)),202===r.status){e.next=18;break}return e.t0=alert,e.t1=p.a,e.next=15,r.json();case 15:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 18:n++,e.next=1;break;case 21:case"end":return e.stop()}},e,t)}))()}},computed:{message:function(){return this.itemsForEdit&&(1===this.itemsForEdit.length?this.m="Вы уверены, что хотите внести изменения в запись?":this.m="Вы уверены, что хотите внести изменения в записи?"),this.m}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchEmployees();case 2:t.itemsForEdit=t.$parent.$data.dataForChildren,ue.$emit("clearDataForChildren");case 4:case"end":return e.stop()}},e,t)}))()}},ut={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",{staticClass:"mt-3"},[n("b-row",[n("b-col",{attrs:{cols:"2"}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.confirm-modal",modifiers:{"confirm-modal":!0}}],attrs:{variant:"dark"}},[t._v("\n          Внести изменения\n        ")]),t._v(" "),n("b-navbar",{directives:[{name:"b-scrollspy",rawName:"v-b-scrollspy:scrollspy-nested",arg:"scrollspy-nested"}],staticClass:"flex-column"},[n("b-nav",{attrs:{pills:"",vertical:""}},t._l(t.itemsForEdit,function(e){return n("b-nav-item",{key:e._id,attrs:{href:"#item-"+e._id},on:{click:t.scrollIntoView}},[t._v("\n              "+t._s(e.name?e.name:"Материальная ценность "+(e.index+1))+"\n            ")])}),1)],1)],1),t._v(" "),n("b-col",{attrs:{cols:"10"}},[n("div",{ref:"items",staticStyle:{position:"relative",height:"550px","overflow-y":"scroll"},attrs:{id:"scrollspy-nested"}},t._l(t.itemsForEdit,function(e){return n("group-edit-form",{key:e._id,attrs:{itemForm:e,id:"item-"+e._id,employeeInitials:t.employeeInitials}})}),1)])],1)],1),t._v(" "),n("confirm-form",{attrs:{message:t.message,op:t.editItems}})],1)},staticRenderFns:[]};var mt=n("VU/8")(lt,ut,!1,function(t){n("F5Mc")},"data-v-670354d4",null).exports,dt={name:"OTSSCategoryAddModal",data:function(){return{form:{category:""}}},methods:{createOTSSCategory:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/otss/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:p()(t.form)});case 2:if(201===(n=e.sent).status){e.next=11;break}return e.t0=alert,e.t1=p.a,e.next=8,n.json();case 8:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 11:ue.$emit("newData");case 12:case"end":return e.stop()}},e,t)}))()},onReset:function(t){t.preventDefault(),this.initForm(),this.$refs.otssAddModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.otssAddModal.hide(),this.createOTSSCategory(),this.initForm()},check:function(t,e){return t!==e},initForm:function(){for(var t in this.form)this.form[t]=""}}},ft={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"otssAddModal",attrs:{id:"o-t-s-s-category-add-modal",title:"Добавить ОТСС категорию в базу","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Добавить\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-category-group",label:"ОТСС категория:","label-for":"form-category-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-category-input",type:"text",value:t.form.category,required:"",autofocus:"",placeholder:"Введите название категории",state:t.check(t.form.category,"")},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var pt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{ref:"selectableTable",staticClass:"mt-3",attrs:{striped:"",hover:"",fixed:"","sort-by":"surname",items:t.otssCategories,fields:t.otssFields,small:""},scopedSlots:t._u([{key:"head(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[t._v("Изменить/Удалить")])]}},{key:"cell(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.otss-edit-modal",modifiers:{"otss-edit-modal":!0}}],attrs:{icon:"pencil-square",variant:"warning","data-toggle":"tooltip","data-placement":"top",title:"Редактировать","font-scale":"2"},on:{click:function(n){return t.edit(e.item)}}}),t._v(" "),n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.otss-confirm",modifiers:{"otss-confirm":!0}}],attrs:{icon:"trash",variant:"danger","font-scale":"2","data-toggle":"tooltip","data-placement":"top",title:"Удалить"},on:{click:function(n){return t.remove(e.item)}}})],1)]}}])})],1)},staticRenderFns:[]};var vt={name:"OTSSCategoryEditModal",data:function(){return{form:{category:""}}},methods:{editOTSS:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t._id,e.next=3,fetch("http://localhost:8000/api/v1/otss/"+o+"/",{method:"PUT",body:p()(t),headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:if(i=e.sent,console.log("Успех:",p()(i)),202===r.status){e.next=16;break}return e.t0=alert,e.t1=p.a,e.next=13,r.json();case 13:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 16:ue.$emit("newData");case 17:case"end":return e.stop()}},n,e)}))()},onReset:function(t){t.preventDefault(),this.$refs.otssEditModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.otssEditModal.hide();var e=this.form;this.editOTSS(e)},check:function(t,e){return t!==e}}},bt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"otssEditModal",attrs:{id:"otss-edit-modal",title:"Редактировать запись","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Редактировать\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-category-group",label:"ОТСС категория:","label-for":"form-category-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-category-input",type:"text",value:t.form.category,required:"",placeholder:"Введите название категории",state:t.check(t.form.category,"")},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var ht={name:"OTSSCategoryPage",components:{ConfirmForm:w,OTSSCategoryAddModal:n("VU/8")(dt,ft,!1,function(t){n("UK/k")},null,null).exports,OTSSCategoryTable:n("VU/8")({name:"OTSSCategoryTable",props:["otssCategories","editOTSS","selectToRemoveRecord"],data:function(){return{otssFields:[{key:"edit_remove",isRowHeader:!0,class:"text-center"},{key:"category",label:"ОТСС категория",sortable:!0,class:"text-center"}]}},methods:{edit:function(t){this.editOTSS(t)},remove:function(t){this.selectToRemoveRecord(t)}}},pt,!1,function(t){n("+G8A")},"data-v-b6ae5946",null).exports,OTSSCategoryEditModal:n("VU/8")(vt,bt,!1,function(t){n("FKgI")},null,null).exports},data:function(){return{otssCategoryMessage:"Удалить категорию ОТСС из базы?",otssConfirm:"otss-confirm",otssCategories:[],selected:[]}},methods:{selectToRemoveOTSS:function(t){var e=this;return a()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.selected.push(t);case 1:case"end":return n.stop()}},n,e)}))()},removeOTSS:function(t){var e=this;return a()(s.a.mark(function n(){var o,r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t._id,n.next=3,fetch("http://localhost:8000/api/v1/otss/"+o+"/",{method:"DELETE",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:if(204===(r=n.sent).status){n.next=12;break}return n.t0=alert,n.t1=p.a,n.next=9,r.json();case 9:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3);case 12:return n.next=14,e.fetchOTSS();case 14:case"end":return n.stop()}},n,e)}))()},fetchOTSS:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/otss/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.otssCategories=e.sent,t.otssCategories=t.otssCategories.otss,t.selected=[];case 8:case"end":return e.stop()}},e,t)}))()},editOTSS:function(t){this.$refs.otssEdit.form=t}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchOTSS();case 2:return e.next=4,ue.$on("newData",function(){t.fetchOTSS()});case 4:case"end":return e.stop()}},e,t)}))()}},_t={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-col",{staticClass:"mt-3"},[n("h3",[t._v("ОТСС категории")])]),t._v(" "),n("b-col",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.o-t-s-s-category-add-modal",modifiers:{"o-t-s-s-category-add-modal":!0}}],staticClass:"mt-3",attrs:{variant:"success"}},[t._v("\n        Добавить категорию ОТСС\n      ")])],1),t._v(" "),n("o-t-s-s-category-table",{attrs:{"otss-categories":t.otssCategories,"edit-o-t-s-s":t.editOTSS,"select-to-remove-record":t.selectToRemoveOTSS}})],1),t._v(" "),n("o-t-s-s-category-add-modal"),t._v(" "),n("confirm-form",{attrs:{payload:t.selected[0],"dynamic-id":t.otssConfirm,message:t.otssCategoryMessage,op:t.removeOTSS}}),t._v(" "),n("o-t-s-s-category-edit-modal",{ref:"otssEdit"})],1)},staticRenderFns:[]};var yt=n("VU/8")(ht,_t,!1,function(t){n("KaS7")},"data-v-16a5f2b2",null).exports,wt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{ref:"selectableTable",staticClass:"mt-3",attrs:{striped:"",hover:"",fixed:"","sort-by":"surname",items:t.units,fields:t.unitFields,small:""},scopedSlots:t._u([{key:"head(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[t._v("Изменить/Удалить")])]}},{key:"cell(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.unit-edit-modal",modifiers:{"unit-edit-modal":!0}}],attrs:{icon:"pencil-square",variant:"warning","data-toggle":"tooltip","data-placement":"top",title:"Редактировать","font-scale":"2"},on:{click:function(n){return t.edit(e.item)}}}),t._v(" "),n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.unit-confirm",modifiers:{"unit-confirm":!0}}],attrs:{icon:"trash",variant:"danger","font-scale":"2","data-toggle":"tooltip","data-placement":"top",title:"Удалить"},on:{click:function(n){return t.remove(e.item)}}})],1)]}}])})],1)},staticRenderFns:[]};var xt={name:"UnitAddModal",data:function(){return{form:{unit:""}}},methods:{createUnit:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/unit/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:p()(t.form)});case 2:if(201===(n=e.sent).status){e.next=11;break}return e.t0=alert,e.t1=p.a,e.next=8,n.json();case 8:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 11:ue.$emit("newData");case 12:case"end":return e.stop()}},e,t)}))()},onReset:function(t){t.preventDefault(),this.initForm(),this.$refs.unitAddModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.unitAddModal.hide(),this.createUnit(),this.initForm()},check:function(t,e){return t!==e},initForm:function(){for(var t in this.form)this.form[t]=""}}},gt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"unitAddModal",attrs:{id:"unit-add-modal",title:"Добавить подразделние, откуда поступила мат. ценность в базу","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Добавить\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-unit-group",label:"Подразделение, откуда поступила мат. ценность:","label-for":"form-unit-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-unit-input",type:"text",value:t.form.unit,required:"",autofocus:"",placeholder:"Введите название подразделния",state:t.check(t.form.unit,"")},model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var kt={name:"UnitEditModal",data:function(){return{form:{unit:""}}},methods:{editUnit:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t._id,e.next=3,fetch("http://localhost:8000/api/v1/unit/"+o+"/",{method:"PUT",body:p()(t),headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:if(i=e.sent,console.log("Успех:",p()(i)),202===r.status){e.next=16;break}return e.t0=alert,e.t1=p.a,e.next=13,r.json();case 13:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 16:ue.$emit("newData");case 17:case"end":return e.stop()}},n,e)}))()},onReset:function(t){t.preventDefault(),this.$refs.unitEditModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.unitEditModal.hide();var e=this.form;this.editUnit(e)},check:function(t,e){return t!==e}}},Ct={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"unitEditModal",attrs:{id:"unit-edit-modal",title:"Редактировать запись","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Редактировать\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-unit-group",label:"Подразделние, откуда поступила мат. ценность:","label-for":"form-unit-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-unit-input",type:"text",value:t.form.unit,required:"",placeholder:"Введите название подразделния",state:t.check(t.form.unit,"")},model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var Ft={name:"UnitPage",components:{ConfirmForm:w,UnitTable:n("VU/8")({name:"UnitTable",props:["units","editUnit","selectToRemoveRecord"],data:function(){return{unitFields:[{key:"edit_remove",isRowHeader:!0,class:"text-center"},{key:"unit",label:"Подразделние, откуда поступила мат. ценность",sortable:!0,class:"text-center"}]}},methods:{edit:function(t){this.editUnit(t)},remove:function(t){this.selectToRemoveRecord(t)}}},wt,!1,function(t){n("ZcP6")},null,null).exports,UnitAddModal:n("VU/8")(xt,gt,!1,function(t){n("jnj2")},null,null).exports,UnitEditModal:n("VU/8")(kt,Ct,!1,function(t){n("9sJ/")},null,null).exports},data:function(){return{unitMessage:"Удалить подразделение из базы?",unitConfirm:"unit-confirm",units:[],selected:[]}},methods:{selectToRemoveUnit:function(t){var e=this;return a()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.selected.push(t);case 1:case"end":return n.stop()}},n,e)}))()},fetchUnits:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/unit/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.units=e.sent,t.units=t.units.units,t.selected=[];case 8:case"end":return e.stop()}},e,t)}))()},removeUnit:function(t){var e=this;return a()(s.a.mark(function n(){var o,r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t._id,n.next=3,fetch("http://localhost:8000/api/v1/unit/"+o+"/",{method:"DELETE",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:if(204===(r=n.sent).status){n.next=12;break}return n.t0=alert,n.t1=p.a,n.next=9,r.json();case 9:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3);case 12:return n.next=14,e.fetchUnits();case 14:case"end":return n.stop()}},n,e)}))()},editUnit:function(t){this.$refs.unitEdit.form=t}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchUnits();case 2:return e.next=4,ue.$on("newData",function(){t.fetchUnits()});case 4:case"end":return e.stop()}},e,t)}))()}},$t={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-col",{staticClass:"mt-3"},[n("h3",[t._v("Подразделение, откуда поступила мат. ценность")])]),t._v(" "),n("b-col",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.unit-add-modal",modifiers:{"unit-add-modal":!0}}],staticClass:"mt-3",attrs:{variant:"success"}},[t._v("\n        Добавить подразделение\n      ")])],1),t._v(" "),n("unit-table",{attrs:{units:t.units,"edit-unit":t.editUnit,"select-to-remove-record":t.selectToRemoveUnit}})],1),t._v(" "),n("unit-add-modal"),t._v(" "),n("confirm-form",{attrs:{payload:t.selected[0],"dynamic-id":t.unitConfirm,message:t.unitMessage,op:t.removeUnit}}),t._v(" "),n("unit-edit-modal",{ref:"unitEdit"})],1)},staticRenderFns:[]};var Rt=n("VU/8")(Ft,$t,!1,function(t){n("TSLY")},"data-v-19bbb0be",null).exports,qt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{ref:"selectableTable",staticClass:"mt-3",attrs:{striped:"",hover:"",fixed:"","sort-by":"category",items:t.categories,fields:t.categoryFields,small:""},scopedSlots:t._u([{key:"head(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[t._v("Изменить/Удалить")])]}},{key:"cell(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.category-edit-modal",modifiers:{"category-edit-modal":!0}}],attrs:{icon:"pencil-square",variant:"warning","data-toggle":"tooltip","data-placement":"top",title:"Редактировать","font-scale":"2"},on:{click:function(n){return t.edit(e.item)}}}),t._v(" "),n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.category-confirm",modifiers:{"category-confirm":!0}}],attrs:{icon:"trash",variant:"danger","font-scale":"2","data-toggle":"tooltip","data-placement":"top",title:"Удалить"},on:{click:function(n){return t.remove(e.item)}}})],1)]}}])})],1)},staticRenderFns:[]};var Et={name:"CategoryAddModal",data:function(){return{form:{category:""}}},methods:{createCategory:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/category/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:p()(t.form)});case 2:if(201===(n=e.sent).status){e.next=11;break}return e.t0=alert,e.t1=p.a,e.next=8,n.json();case 8:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 11:ue.$emit("newData");case 12:case"end":return e.stop()}},e,t)}))()},onReset:function(t){t.preventDefault(),this.initForm(),this.$refs.categoryAddModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.categoryAddModal.hide(),this.createCategory(),this.initForm()},check:function(t,e){return t!==e},initForm:function(){for(var t in this.form)this.form[t]=""}}},St={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"categoryAddModal",attrs:{id:"category-add-modal",title:"Добавить категорию","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Добавить\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-category-group",label:"Категория:","label-for":"form-category-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-category-input",type:"text",autofocus:"",value:t.form.category,required:"",placeholder:"Введите название категории",state:t.check(t.form.category,"")},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var Tt={name:"CategoryEditModal",data:function(){return{form:{category:""}}},methods:{editCategory:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t._id,e.next=3,fetch("http://localhost:8000/api/v1/category/"+o+"/",{method:"PUT",body:p()(t),headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:if(i=e.sent,console.log("Успех:",p()(i)),202===r.status){e.next=16;break}return e.t0=alert,e.t1=p.a,e.next=13,r.json();case 13:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 16:ue.$emit("newData");case 17:case"end":return e.stop()}},n,e)}))()},onReset:function(t){t.preventDefault(),this.$refs.categoryEditModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.categoryEditModal.hide();var e=this.form;this.editCategory(e)},check:function(t,e){return t!==e}}},jt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"categoryEditModal",attrs:{id:"category-edit-modal",title:"Редактировать запись","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Редактировать\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-category-group",label:"Категория:","label-for":"form-category-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-category-input",type:"text",value:t.form.category,required:"",placeholder:"Введите название категории",state:t.check(t.form.category,"")},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var Mt={name:"CategoryPage",components:{ConfirmForm:w,CategoryTable:n("VU/8")({name:"CategoryTable",props:["categories","editCategory","selectToRemoveRecord"],data:function(){return{categoryFields:[{key:"edit_remove",isRowHeader:!0,class:"text-center"},{key:"category",label:"Категория",sortable:!0,class:"text-center"}]}},methods:{edit:function(t){this.editCategory(t)},remove:function(t){this.selectToRemoveRecord(t)}}},qt,!1,function(t){n("V6jk")},null,null).exports,CategoryAddModal:n("VU/8")(Et,St,!1,function(t){n("L/uN")},null,null).exports,CategoryEditModal:n("VU/8")(Tt,jt,!1,function(t){n("zu0l")},null,null).exports},data:function(){return{categoryMessage:"Удалить категорию из базы?",categoryConfirm:"category-confirm",categories:[],selected:[]}},methods:{selectToRemoveCategory:function(t){var e=this;return a()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.selected.push(t);case 1:case"end":return n.stop()}},n,e)}))()},fetchCategories:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/category/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.categories=e.sent,t.categories=t.categories.categories,t.selected=[];case 8:case"end":return e.stop()}},e,t)}))()},removeCategory:function(t){var e=this;return a()(s.a.mark(function n(){var o,r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t._id,n.next=3,fetch("http://localhost:8000/api/v1/category/"+o+"/",{method:"DELETE",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:if(204===(r=n.sent).status){n.next=12;break}return n.t0=alert,n.t1=p.a,n.next=9,r.json();case 9:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3);case 12:return n.next=14,e.fetchCategories();case 14:case"end":return n.stop()}},n,e)}))()},editCategories:function(t){this.$refs.categoryEdit.form=t}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchCategories();case 2:return e.next=4,ue.$on("newData",function(){t.fetchCategories()});case 4:case"end":return e.stop()}},e,t)}))()}},It={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-col",{staticClass:"mt-3"},[n("h3",[t._v("Категории")])]),t._v(" "),n("b-col",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.category-add-modal",modifiers:{"category-add-modal":!0}}],staticClass:"mt-3",attrs:{variant:"success"}},[t._v("\n        Добавить категорию\n      ")])],1),t._v(" "),n("category-table",{attrs:{categories:t.categories,"edit-category":t.editCategories,"select-to-remove-record":t.selectToRemoveCategory}})],1),t._v(" "),n("category-add-modal"),t._v(" "),n("confirm-form",{attrs:{payload:t.selected[0],"dynamic-id":t.categoryConfirm,message:t.categoryMessage,op:t.removeCategory}}),t._v(" "),n("category-edit-modal",{ref:"categoryEdit"})],1)},staticRenderFns:[]};var Lt=n("VU/8")(Mt,It,!1,function(t){n("YHQf")},"data-v-2d16e0e4",null).exports,Dt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{ref:"selectableTable",staticClass:"mt-3",attrs:{striped:"",hover:"",fixed:"",items:t.locations,fields:t.locationFields,small:""},scopedSlots:t._u([{key:"head(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[t._v("Изменить/Удалить")])]}},{key:"cell(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.location-edit-modal",modifiers:{"location-edit-modal":!0}}],attrs:{icon:"pencil-square",variant:"warning","data-toggle":"tooltip","data-placement":"top",title:"Редактировать","font-scale":"2"},on:{click:function(n){return t.edit(e.item)}}}),t._v(" "),n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.location-confirm",modifiers:{"location-confirm":!0}}],attrs:{icon:"trash",variant:"danger","font-scale":"2","data-toggle":"tooltip","data-placement":"top",title:"Удалить"},on:{click:function(n){return t.remove(e.item)}}})],1)]}}])})],1)},staticRenderFns:[]};var At={name:"locationAddModal",data:function(){return{form:{object:"",corpus:"",cabinet:"",unit:""}}},methods:{createLocation:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/location/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:p()(t.form)});case 2:if(201===(n=e.sent).status){e.next=11;break}return e.t0=alert,e.t1=p.a,e.next=8,n.json();case 8:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 11:ue.$emit("newData");case 12:case"end":return e.stop()}},e,t)}))()},onReset:function(t){t.preventDefault(),this.initForm(),this.$refs.locationAddModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.locationAddModal.hide(),this.createLocation(),this.initForm()},check:function(t,e){return t!==e},initForm:function(){for(var t in this.form)this.form[t]=""}}},Nt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"locationAddModal",attrs:{id:"location-add-modal",title:"Добавить местоположение","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Добавить\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-location-group",label:"Местоположение:","label-for":"form-object-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-location-input",type:"text",value:t.form.object,required:"",autofocus:"",placeholder:"Введите название объекта",state:t.check(t.form.object,"")},model:{value:t.form.object,callback:function(e){t.$set(t.form,"object",e)},expression:"form.object"}}),t._v(" "),n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-corpus-input",type:"text",value:t.form.corpus,required:"",placeholder:"Введите номер корпуса",state:t.check(t.form.corpus,"")},model:{value:t.form.corpus,callback:function(e){t.$set(t.form,"corpus",e)},expression:"form.corpus"}}),t._v(" "),n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-cabinet-input",type:"text",value:t.form.cabinet,required:"",placeholder:"Введите номер кабинета",state:t.check(t.form.cabinet,"")},model:{value:t.form.cabinet,callback:function(e){t.$set(t.form,"cabinet",e)},expression:"form.cabinet"}}),t._v(" "),n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-unit-input",type:"text",value:t.form.unit,required:"",placeholder:"Введите подразделение",state:t.check(t.form.unit,"")},model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var Ut={name:"LocationEditModal",data:function(){return{form:{object:"",corpus:"",cabinet:"",unit:""}}},methods:{editLocation:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t._id,e.next=3,fetch("http://localhost:8000/api/v1/location/"+o+"/",{method:"PUT",body:p()(t),headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:if(i=e.sent,console.log("Успех:",p()(i)),202===r.status){e.next=16;break}return e.t0=alert,e.t1=p.a,e.next=13,r.json();case 13:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 16:ue.$emit("newData");case 17:case"end":return e.stop()}},n,e)}))()},onReset:function(t){t.preventDefault(),this.$refs.locationEditModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.locationEditModal.hide();var e=this.form;this.editLocation(e)},check:function(t,e){return t!==e}}},Ot={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"locationEditModal",attrs:{id:"location-edit-modal",title:"Редактировать местоположение","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Редактировать\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-location-group",label:"Местоположение:","label-for":"form-object-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-location-input",type:"text",value:t.form.object,required:"",placeholder:"Введите название объекта",state:t.check(t.form.object,"")},model:{value:t.form.object,callback:function(e){t.$set(t.form,"object",e)},expression:"form.object"}}),t._v(" "),n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-corpus-input",type:"text",value:t.form.corpus,required:"",placeholder:"Введите номер корпуса",state:t.check(t.form.corpus,"")},model:{value:t.form.corpus,callback:function(e){t.$set(t.form,"corpus",e)},expression:"form.corpus"}}),t._v(" "),n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-cabinet-input",type:"text",value:t.form.cabinet,required:"",placeholder:"Введите номер кабинета",state:t.check(t.form.cabinet,"")},model:{value:t.form.cabinet,callback:function(e){t.$set(t.form,"cabinet",e)},expression:"form.cabinet"}}),t._v(" "),n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-unit-input",type:"text",value:t.form.unit,required:"",placeholder:"Введите подразделение",state:t.check(t.form.unit,"")},model:{value:t.form.unit,callback:function(e){t.$set(t.form,"unit",e)},expression:"form.unit"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var Vt={name:"EmployeePage",components:{ConfirmForm:w,LocationTable:n("VU/8")({name:"LocationTable",props:["locations","editLocation","selectToRemoveRecord"],data:function(){return{locationFields:[{key:"edit_remove",isRowHeader:!0,class:"text-center"},{key:"object",label:"Объект",sortable:!0,class:"text-center"},{key:"corpus",label:"Корпус",sortable:!0,class:"text-center"},{key:"cabinet",label:"Кабинет",sortable:!0,class:"text-center"},{key:"unit",label:"Подразделение",sortable:!0,class:"text-center"}]}},methods:{edit:function(t){this.editLocation(t)},remove:function(t){this.selectToRemoveRecord(t)}}},Dt,!1,function(t){n("TDTd")},"data-v-73e21dde",null).exports,LocationAddModal:n("VU/8")(At,Nt,!1,function(t){n("OpGd")},"data-v-5be182df",null).exports,LocationEditModal:n("VU/8")(Ut,Ot,!1,function(t){n("rpvi")},"data-v-53cd62e8",null).exports},data:function(){return{locationMessage:"Удалить местоположение из базы?",locationConfirm:"location-confirm",locations:[],selected:[]}},methods:{selectToRemoveLocation:function(t){var e=this;return a()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.selected.push(t);case 1:case"end":return n.stop()}},n,e)}))()},fetchLocations:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/location/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.locations=e.sent,t.locations=t.locations.locations,t.selected=[];case 8:case"end":return e.stop()}},e,t)}))()},removeLocation:function(t){var e=this;return a()(s.a.mark(function n(){var o,r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t._id,n.next=3,fetch("http://localhost:8000/api/v1/location/"+o+"/",{method:"DELETE",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:if(204===(r=n.sent).status){n.next=12;break}return n.t0=alert,n.t1=p.a,n.next=9,r.json();case 9:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3);case 12:return n.next=14,e.fetchLocations();case 14:case"end":return n.stop()}},n,e)}))()},editLocation:function(t){this.$refs.locationEdit.form=t}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchLocations();case 2:return e.next=4,ue.$on("newData",function(){t.fetchLocations()});case 4:case"end":return e.stop()}},e,t)}))()}},Pt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-col",{staticClass:"mt-3"},[n("h3",[t._v("Местоположения")])]),t._v(" "),n("b-col",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.location-add-modal",modifiers:{"location-add-modal":!0}}],staticClass:"mt-3",attrs:{variant:"success"}},[t._v("\n        Добавить местопложение\n      ")])],1),t._v(" "),n("location-table",{attrs:{locations:t.locations,"edit-location":t.editLocation,"select-to-remove-record":t.selectToRemoveLocation}})],1),t._v(" "),n("location-add-modal"),t._v(" "),n("confirm-form",{attrs:{payload:t.selected[0],"dynamic-id":t.locationConfirm,message:t.locationMessage,op:t.removeLocation}}),t._v(" "),n("location-edit-modal",{ref:"locationEdit"})],1)},staticRenderFns:[]};var zt=n("VU/8")(Vt,Pt,!1,function(t){n("yQIe")},"data-v-23a986bb",null).exports,Ht={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{ref:"selectableTable",staticClass:"mt-3",attrs:{striped:"",hover:"",fixed:"","sort-by":"surname",items:t.types,fields:t.typeFields,small:""},scopedSlots:t._u([{key:"head(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[t._v("Изменить/Удалить")])]}},{key:"cell(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.type-edit-modal",modifiers:{"type-edit-modal":!0}}],attrs:{icon:"pencil-square",variant:"warning","data-toggle":"tooltip","data-placement":"top",title:"Редактировать","font-scale":"2"},on:{click:function(n){return t.edit(e.item)}}}),t._v(" "),n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.type-confirm",modifiers:{"type-confirm":!0}}],attrs:{icon:"trash",variant:"danger","font-scale":"2","data-toggle":"tooltip","data-placement":"top",title:"Удалить"},on:{click:function(n){return t.remove(e.item)}}})],1)]}}])})],1)},staticRenderFns:[]};var Gt={name:"TypeAddModal",data:function(){return{form:{type:""}}},methods:{createType:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/type/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:p()(t.form)});case 2:if(201===(n=e.sent).status){e.next=11;break}return e.t0=alert,e.t1=p.a,e.next=8,n.json();case 8:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 11:ue.$emit("newData");case 12:case"end":return e.stop()}},e,t)}))()},onReset:function(t){t.preventDefault(),this.initForm(),this.$refs.typeAddModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.typeAddModal.hide(),this.createType(),this.initForm()},check:function(t,e){return t!==e},initForm:function(){for(var t in this.form)this.form[t]=""}}},Kt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"typeAddModal",attrs:{id:"type-add-modal",title:"Добавить тип составляющей","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Добавить\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-type-group",label:"Тип составляющей:","label-for":"form-type-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-type-input",type:"text",value:t.form.type,required:"",autofocus:"",placeholder:"Введите тип составляющей",state:t.check(t.form.type,"")},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var Yt={name:"TypeEditModal",data:function(){return{form:{type:""}}},methods:{editType:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t._id,e.next=3,fetch("http://localhost:8000/api/v1/type/"+o+"/",{method:"PUT",body:p()(t),headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:if(i=e.sent,console.log("Успех:",p()(i)),202===r.status){e.next=16;break}return e.t0=alert,e.t1=p.a,e.next=13,r.json();case 13:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 16:ue.$emit("newData");case 17:case"end":return e.stop()}},n,e)}))()},onReset:function(t){t.preventDefault(),this.$refs.typeEditModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.typeEditModal.hide();var e=this.form;this.editType(e)},check:function(t,e){return t!==e}}},Wt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"typeEditModal",attrs:{id:"type-edit-modal",title:"Редактировать запись","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Редактировать\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-type-group",label:"Тип составляющей:","label-for":"form-type-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-type-input",type:"text",value:t.form.type,required:"",placeholder:"Введите тип составляющей",state:t.check(t.form.type,"")},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var Bt={name:"TypePage",components:{ConfirmForm:w,TypeTable:n("VU/8")({name:"TypeTable",props:["types","editType","selectToRemoveRecord"],data:function(){return{typeFields:[{key:"edit_remove",isRowHeader:!0,class:"text-center"},{key:"type",label:"Тип составляющей",sortable:!0,class:"text-center"}]}},methods:{edit:function(t){this.editType(t)},remove:function(t){this.selectToRemoveRecord(t)}}},Ht,!1,function(t){n("3uPM")},null,null).exports,TypeAddModal:n("VU/8")(Gt,Kt,!1,function(t){n("04cq")},"data-v-1f26a3ea",null).exports,TypeEditModal:n("VU/8")(Yt,Wt,!1,function(t){n("Qt+U")},null,null).exports},data:function(){return{typeMessage:"Удалить тип из базы?",typeConfirm:"type-confirm",types:[],selected:[]}},methods:{selectToRemoveType:function(t){var e=this;return a()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.selected.push(t);case 1:case"end":return n.stop()}},n,e)}))()},fetchTypes:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/type/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.types=e.sent,t.types=t.types.types,t.selected=[];case 8:case"end":return e.stop()}},e,t)}))()},removeType:function(t){var e=this;return a()(s.a.mark(function n(){var o,r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t._id,n.next=3,fetch("http://localhost:8000/api/v1/type/"+o+"/",{method:"DELETE",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:if(204===(r=n.sent).status){n.next=12;break}return n.t0=alert,n.t1=p.a,n.next=9,r.json();case 9:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3);case 12:return n.next=14,e.fetchTypes();case 14:case"end":return n.stop()}},n,e)}))()},editType:function(t){this.$refs.typeEdit.form=t}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTypes();case 2:return e.next=4,ue.$on("newData",function(){t.fetchTypes()});case 4:case"end":return e.stop()}},e,t)}))()}},Qt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-col",{staticClass:"mt-3"},[n("h3",[t._v("Типы состовляющих")])]),t._v(" "),n("b-col",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.type-add-modal",modifiers:{"type-add-modal":!0}}],staticClass:"mt-3",attrs:{variant:"success"}},[t._v("\n        Добавить тип составляющей\n      ")])],1),t._v(" "),n("type-table",{attrs:{types:t.types,"edit-type":t.editType,"select-to-remove-record":t.selectToRemoveType}})],1),t._v(" "),n("type-add-modal"),t._v(" "),n("confirm-form",{attrs:{payload:t.selected[0],"dynamic-id":t.typeConfirm,message:t.typeMessage,op:t.removeType}}),t._v(" "),n("type-edit-modal",{ref:"typeEdit"})],1)},staticRenderFns:[]};var Zt=n("VU/8")(Bt,Qt,!1,function(t){n("HHiU")},"data-v-1dd71f48",null).exports,Jt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-table",{ref:"selectableTable",staticClass:"mt-3",attrs:{striped:"",hover:"",fixed:"","sort-by":"condition",items:t.conditions,fields:t.conditionFields,small:""},scopedSlots:t._u([{key:"head(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[t._v("Изменить/Удалить")])]}},{key:"cell(edit_remove)",fn:function(e){return[n("div",{staticClass:"text-nowrap"},[n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.condition-edit-modal",modifiers:{"condition-edit-modal":!0}}],attrs:{icon:"pencil-square",variant:"warning","data-toggle":"tooltip","data-placement":"top",title:"Редактировать","font-scale":"2"},on:{click:function(n){return t.edit(e.item)}}}),t._v(" "),n("b-icon",{directives:[{name:"b-modal",rawName:"v-b-modal.condition-confirm",modifiers:{"condition-confirm":!0}}],attrs:{icon:"trash",variant:"danger","font-scale":"2","data-toggle":"tooltip","data-placement":"top",title:"Удалить"},on:{click:function(n){return t.remove(e.item)}}})],1)]}}])})],1)},staticRenderFns:[]};var Xt={name:"ConditionAddModal",data:function(){return{form:{condition:""}}},methods:{createCondition:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/condition/",{method:"POST",headers:{Accept:"application/json","Content-type":"application/json"},body:p()(t.form)});case 2:if(201===(n=e.sent).status){e.next=11;break}return e.t0=alert,e.t1=p.a,e.next=8,n.json();case 8:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 11:ue.$emit("newData");case 12:case"end":return e.stop()}},e,t)}))()},onReset:function(t){t.preventDefault(),this.initForm(),this.$refs.conditionAddModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.conditionAddModal.hide(),this.createCondition(),this.initForm()},check:function(t,e){return t!==e},initForm:function(){for(var t in this.form)this.form[t]=""}}},te={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"conditionAddModal",attrs:{id:"condition-add-modal",title:"Добавить состояние","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Добавить\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-condition-group",label:"Состоние:","label-for":"form-condition-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-condition-input",type:"text",autofocus:"",value:t.form.condition,required:"",placeholder:"Введите название состояния",state:t.check(t.form.condition,"")},model:{value:t.form.condition,callback:function(e){t.$set(t.form,"condition",e)},expression:"form.condition"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var ee={name:"ConditionEditModal",data:function(){return{form:{condition:""}}},methods:{editCondition:function(t){var e=this;return a()(s.a.mark(function n(){var o,r,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t._id,e.next=3,fetch("http://localhost:8000/api/v1/condition/"+o+"/",{method:"PUT",body:p()(t),headers:{Accept:"application/json","Content-type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:if(i=e.sent,console.log("Успех:",p()(i)),202===r.status){e.next=16;break}return e.t0=alert,e.t1=p.a,e.next=13,r.json();case 13:e.t2=e.sent,e.t3=(0,e.t1)(e.t2,null,2),(0,e.t0)(e.t3);case 16:ue.$emit("newData");case 17:case"end":return e.stop()}},n,e)}))()},onReset:function(t){t.preventDefault(),this.$refs.conditionEditModal.hide()},onSubmit:function(t){t.preventDefault(),this.$refs.conditionEditModal.hide();var e=this.form;this.editCondition(e)},check:function(t,e){return t!==e}}},ne={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"conditionEditModal",attrs:{id:"condition-edit-modal",title:"Редактировать запись","no-close-on-backdrop":"","hide-footer":"","hide-header-close":""}},[n("b-form",{staticClass:"w-100"},[n("div",{staticClass:"submit-reset-buttons mt-3 my"},[n("b-button",{attrs:{type:"submit",variant:"success"},on:{click:t.onSubmit}},[t._v("\n        Редактировать\n      ")]),t._v(" "),n("b-button",{attrs:{type:"reset",variant:"danger"},on:{click:t.onReset}},[t._v("\n        Отмена\n      ")])],1),t._v(" "),n("div",{staticClass:"container mt-3"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("b-form-group",{attrs:{id:"form-condition-group",label:"Категория:","label-for":"form-condition-input"}},[n("b-form-input",{staticClass:"mt-3",attrs:{id:"form-condition-input",type:"text",value:t.form.condition,required:"",placeholder:"Введите название состояния",state:t.check(t.form.condition,"")},model:{value:t.form.condition,callback:function(e){t.$set(t.form,"condition",e)},expression:"form.condition"}})],1)],1)])])])],1)],1)},staticRenderFns:[]};var oe={name:"ConditionPage",components:{ConfirmForm:w,ConditionTable:n("VU/8")({name:"ConditionTable",props:["conditions","editCondition","selectToRemoveRecord"],data:function(){return{conditionFields:[{key:"edit_remove",isRowHeader:!0,class:"text-center"},{key:"condition",label:"Категория",sortable:!0,class:"text-center"}]}},methods:{edit:function(t){this.editCondition(t)},remove:function(t){this.selectToRemoveRecord(t)}}},Jt,!1,function(t){n("A2X2")},null,null).exports,ConditionAddModal:n("VU/8")(Xt,te,!1,function(t){n("nCoK")},null,null).exports,ConditionEditModal:n("VU/8")(ee,ne,!1,function(t){n("C4IN")},null,null).exports},data:function(){return{conditionMessage:"Удалить состояние из базы?",conditionConfirm:"condition-confirm",conditions:[],selected:[]}},methods:{selectToRemoveCondition:function(t){var e=this;return a()(s.a.mark(function n(){return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.selected.push(t);case 1:case"end":return n.stop()}},n,e)}))()},fetchConditions:function(){var t=this;return a()(s.a.mark(function e(){var n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8000/api/v1/condition/");case 2:return n=e.sent,e.next=5,n.json();case 5:t.conditions=e.sent,t.conditions=t.conditions.conditions,t.selected=[];case 8:case"end":return e.stop()}},e,t)}))()},removeCondition:function(t){var e=this;return a()(s.a.mark(function n(){var o,r;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=t._id,n.next=3,fetch("http://localhost:8000/api/v1/condition/"+o+"/",{method:"DELETE",headers:{Accept:"application/json","Content-type":"application/json"}});case 3:if(204===(r=n.sent).status){n.next=12;break}return n.t0=alert,n.t1=p.a,n.next=9,r.json();case 9:n.t2=n.sent,n.t3=(0,n.t1)(n.t2,null,2),(0,n.t0)(n.t3);case 12:return n.next=14,e.fetchConditions();case 14:case"end":return n.stop()}},n,e)}))()},editConditions:function(t){this.$refs.conditionEdit.form=t}},created:function(){var t=this;return a()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchConditions();case 2:return e.next=4,ue.$on("newData",function(){t.fetchConditions()});case 4:case"end":return e.stop()}},e,t)}))()}},re={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-container",[n("b-col",{staticClass:"mt-3"},[n("h3",[t._v("Состояния")])]),t._v(" "),n("b-col",[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.condition-add-modal",modifiers:{"condition-add-modal":!0}}],staticClass:"mt-3",attrs:{variant:"success"}},[t._v("\n        Добавить состояние\n      ")])],1),t._v(" "),n("condition-table",{attrs:{conditions:t.conditions,"edit-condition":t.editConditions,"select-to-remove-record":t.selectToRemoveCondition}})],1),t._v(" "),n("condition-add-modal"),t._v(" "),n("confirm-form",{attrs:{payload:t.selected[0],"dynamic-id":t.conditionConfirm,message:t.conditionMessage,op:t.removeCondition}}),t._v(" "),n("condition-edit-modal",{ref:"conditionEdit"})],1)},staticRenderFns:[]};var se=n("VU/8")(oe,re,!1,function(t){n("M8ks")},"data-v-66174034",null).exports;o.default.use(d.a);var ie=new d.a({routes:[{path:"/items/groupadd/",name:"GroupAddPage",component:it},{path:"/items/groupedit/",name:"GroupEditPage",component:mt},{path:"/items/",name:"ItemList",component:et},{path:"/employees/",name:"EmployeeList",component:$},{path:"/otss/",name:"OTSSList",component:yt},{path:"/units/",name:"UnitList",component:Rt},{path:"/categories/",name:"CategoryList",component:Lt},{path:"/locations/",name:"LocationList",component:zt},{path:"/types/",name:"TypeList",component:Zt},{path:"/conditions/",name:"ConditionList",component:se}]}),ae=n("Tqaz"),ce=n("hfm0"),le=n.n(ce);n.d(e,"bus",function(){return ue}),o.default.use(le.a),o.default.use(ae.a),o.default.use(ae.b),o.default.config.productionTip=!1;var ue=new o.default;new o.default({el:"#app",router:ie,components:{App:m},template:"<App/>"})},NeZN:function(t,e){},OpGd:function(t,e){},"Qt+U":function(t,e){},SK7f:function(t,e){},TDTd:function(t,e){},TSLY:function(t,e){},"UK/k":function(t,e){},V6jk:function(t,e){},YHQf:function(t,e){},Yoxc:function(t,e){},Z7gM:function(t,e){},ZcP6:function(t,e){},"bM+e":function(t,e){},jnj2:function(t,e){},ltgE:function(t,e){},"mKE+":function(t,e){},nCoK:function(t,e){},oRsq:function(t,e){},rWM8:function(t,e){},rpvi:function(t,e){},sNFE:function(t,e){},ukEN:function(t,e){},yQIe:function(t,e){},zu0l:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.9c98929ed6e15ec907e6.js.map